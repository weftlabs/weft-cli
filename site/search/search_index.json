{"config":{"lang":["en"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"],"fields":{"title":{"boost":1000.0},"text":{"boost":1.0},"tags":{"boost":1000000.0}}},"docs":[{"location":"","title":"Home","text":""},{"location":"#weft-cli","title":"Weft CLI","text":"<p>Enterprise-Grade AI-Assisted Software Development</p> <p>Transform your development workflow with specialized AI agents that design, architect, and implement features while you maintain full control.</p> <p>Get Started View on GitHub</p>"},{"location":"#what-is-weft","title":"What is Weft?","text":"<p>Weft is a CLI tool that orchestrates 6 specialized AI agents through a structured workflow to design and implement software features. Unlike \"vibe coding\" tools, Weft provides:</p> <ul> <li>\u2705 Structured Workflow - Role-based agents with clear responsibilities</li> <li>\u2705 Full Auditability - Every AI interaction is versioned and traceable</li> <li>\u2705 Human-in-the-Loop - AI suggests, humans decide</li> <li>\u2705 Security First - No secrets or PII exposed to AI</li> <li>\u2705 Production Ready - Docker-based, SOC2/ISO27001 compliant</li> </ul>"},{"location":"#how-it-works","title":"How It Works","text":"<pre><code>graph LR\n    A[Feature Request] --&gt; B[00-Meta Agent]\n    B --&gt; C[01-Architect]\n    C --&gt; D[02-OpenAPI]\n    D --&gt; E[03-UI]\n    E --&gt; F[04-Integration]\n    F --&gt; G[05-Test]\n    G --&gt; H[Human Review]\n    H --&gt; I[Merge to Main]</code></pre>"},{"location":"#the-agent-pipeline","title":"The Agent Pipeline","text":"<p>All 6 agents work sequentially to transform a feature request into production-ready code. Each agent has a specialized role\u2014from understanding requirements to generating tests.</p> <p>Learn more about agents \u2192</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li> <p> Automated Pipeline</p> <p>Run <code>weft feature start</code> to execute all 6 agents sequentially. Code is automatically extracted and applied to your feature branch.</p> </li> <li> <p> Docker-First</p> <p>All agents run in isolated containers for consistency and security. No local environment pollution.</p> </li> <li> <p> Git Worktrees</p> <p>Each feature gets a dedicated worktree for true isolation. Parallel development without branch switching.</p> </li> <li> <p> Security by Design</p> <p>No automatic code execution. Mandatory human review gates. Full audit trails. API keys via environment only.</p> </li> <li> <p> Language Agnostic</p> <p>Configure your stack in <code>.weftrc.yaml</code>. Supports TypeScript, Python, Go, Rust, and more.</p> </li> <li> <p> Observable</p> <p>OpenTelemetry integration (coming M3). Full tracing and metrics for every agent operation.</p> </li> </ul>"},{"location":"#quick-start","title":"Quick Start","text":"<p>Install Weft using your preferred method:</p> HomebrewpipxcurlFrom Source <pre><code>brew tap weftlabs/tap\nbrew install weft\n</code></pre> <pre><code>pipx install git+https://github.com/weftlabs/weft-cli.git\n</code></pre> <pre><code>curl -fsSL https://raw.githubusercontent.com/weftlabs/weft-cli/main/install.sh | sh\n</code></pre> <pre><code>git clone https://github.com/weftlabs/weft-cli.git\ncd weft-cli\npip install -e .\n</code></pre> <p>Then initialize your project:</p> <pre><code># Navigate to your project\ncd ~/projects/my-app\n\n# Initialize Weft\nweft init\n\n# Set your Claude API key\nexport ANTHROPIC_API_KEY=sk-ant-api03-...\n\n# Start the agent runtime\nweft up\n\n# Create and run your first feature\nweft feature create user-auth\nweft feature start user-auth\n\n# Review AI-generated code and decide\nweft feature review user-auth\n</code></pre> <p>Full Installation Guide \u2192</p>"},{"location":"#philosophy","title":"Philosophy","text":"<p>Weft is built on these principles:</p> <ol> <li>Human-in-the-Loop - AI suggests, humans decide</li> <li>Security First - No secrets or sensitive data in AI prompts</li> <li>Full Auditability - Every AI interaction is tracked and versioned</li> <li>Reproducibility - Same inputs yield same outputs</li> <li>Practical Over Perfect - Solve real problems incrementally</li> </ol> <p>This is not a \"vibe coding\" tool. It's a structured workflow system that augments developer capabilities while maintaining full control and traceability.</p> <p>Read full CLI reference \u2192</p>"},{"location":"#architecture","title":"Architecture","text":"<p>Weft uses a file-based task queue architecture where agents monitor directories for new prompts, process them with AI, and write results back to disk. All changes are git-tracked for full auditability.</p> <p>Learn more about architecture \u2192</p>"},{"location":"#community","title":"Community","text":"<ul> <li>GitHub Issues: Report bugs &amp; request features</li> <li>GitHub Discussions: Ask questions &amp; share ideas</li> <li>Contributing: See our contributing guide</li> </ul>"},{"location":"#license","title":"License","text":"<p>Weft CLI is open source software licensed under the MIT License.</p> <p>Ready to transform your development workflow?</p> <p>Get Started \u2192</p>"},{"location":"AGENTS/","title":"Agent System","text":"<p>Weft uses 6 specialized AI agents that work sequentially to transform feature requests into production-ready code. Each agent has a narrow, well-defined responsibility for focused, high-quality outputs.</p>"},{"location":"AGENTS/#agent-pipeline","title":"Agent Pipeline","text":"<pre><code>Feature Request\n     \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  00-Meta       \u2502  Understands request, creates design brief\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  01-Architect  \u2502  Designs technical architecture\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  02-OpenAPI    \u2502  Generates OpenAPI specs (YAML)\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  03-UI         \u2502  Generates UI components\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  04-Integration\u2502  Generates API services &amp; data layer\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2193\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  05-Test       \u2502  Generates &amp; runs tests\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n     \u2193\nCode automatically applied to feature branch\n     \u2193\nHuman review at `weft feature review`\n</code></pre>"},{"location":"AGENTS/#agent-specifications","title":"Agent Specifications","text":"<p>All 6 agents are fully implemented and actively generate code for your configured technology stack.</p>"},{"location":"AGENTS/#00-meta-agent","title":"00-Meta Agent","text":"<p>Status: \u2705 Implemented</p> <p>Role: Feature understanding and design brief creation</p> <p>Input: Feature request or requirement description</p> <p>Output:</p> <ul> <li>Feature summary</li> <li>User stories</li> <li>Acceptance criteria</li> <li>Technical constraints</li> <li>Data models overview</li> <li>API endpoints summary</li> <li>Next steps</li> </ul> <p>Best For:</p> <ul> <li>Initial feature exploration</li> <li>Requirements clarification</li> <li>Design brief creation</li> </ul> <p>Example:</p> <p>Input:</p> <pre><code>Add user authentication to the web app. Users should be able\nto register, login, and logout. Use JWT tokens.\n</code></pre> <p>Output:</p> <pre><code># Feature Design Brief: User Authentication\n\n## Summary\nJWT-based authentication system with registration and login flows.\n\n## User Stories\n- As a new user, I can register with email and password\n- As a registered user, I can log in to access protected features\n- As a logged-in user, I can log out to end my session\n\n## Technical Approach\n\n### 01-Architect Agent\n\n**Status:** \u2705 Implemented\n\n**Role:** Technical architecture and detailed design\n\n**Input:** Meta agent's design brief (or direct requirements)\n\n**Output:**\n- Detailed data models with relationships\n- API endpoint specifications (request/response)\n- Component architecture\n- Integration points\n- Error handling strategy\n- Security considerations\n- Migration path\n</code></pre> <p>Best For:</p> <ul> <li>Detailed technical design</li> <li>API specification</li> <li>Database schema design</li> <li>System architecture</li> </ul> <p>Example:</p> <p>Input: (Meta agent output)</p> <p>Output: <pre><code># Technical Architecture: User Authentication\n\n## Data Models\n\n### User Model\n- id: UUID (Primary key)\n- email: String (Unique, required)\n- password_hash: String (Required)\n- created_at: Timestamp\n- updated_at: Timestamp\n\n## API Endpoints\n\n### POST /api/auth/register\n\nRequest:\n```json\n{\"email\": \"user@example.com\", \"password\": \"secret\"}\n```\nResponse:\n```json\n{\"id\": \"...\", \"email\": \"...\"}\n```\n</code></pre></p>"},{"location":"AGENTS/#02-openapi-agent","title":"02-OpenAPI Agent","text":"<p>Status: \u2705 Implemented (v2.0.0 - Code Generation)</p> <p>Role: Generate OpenAPI/Swagger specifications</p> <p>Input: Architect's API design</p> <p>Output: Complete OpenAPI 3.0 YAML files with full API specifications</p> <p>Generates: <code>api/openapi.yaml</code> with all endpoints, schemas, and documentation</p>"},{"location":"AGENTS/#03-ui-agent","title":"03-UI Agent","text":"<p>Status: \u2705 Implemented (v2.0.0 - Code Generation)</p> <p>Role: Generate UI components</p> <p>Input: Feature requirements, API specs, architecture</p> <p>Output: Complete UI components with type definitions</p> <p>Generates:</p> <ul> <li>Page components (<code>src/pages/</code> or equivalent)</li> <li>Feature components (<code>src/components/&lt;feature&gt;/</code> or equivalent)</li> <li>Reusable UI components (<code>src/components/ui/</code> or equivalent)</li> <li>Styles (CSS/styling files)</li> </ul>"},{"location":"AGENTS/#04-integration-agent","title":"04-Integration Agent","text":"<p>Status: \u2705 Implemented (v2.0.0 - Code Generation)</p> <p>Role: Generate API services and data fetching layer</p> <p>Input: OpenAPI spec, UI components</p> <p>Output: Complete integration layer with type-safe API clients</p> <p>Generates:</p> <ul> <li>API client configuration (<code>src/api/client</code> or equivalent)</li> <li>Service layer (<code>src/api/services/</code> or equivalent)</li> <li>Data fetching abstractions (<code>src/hooks/</code> or equivalent)</li> <li>Error handling (<code>src/api/errors</code> or equivalent)</li> <li>Data provider setup</li> </ul>"},{"location":"AGENTS/#05-test-agent","title":"05-Test Agent","text":"<p>Status: \u2705 Implemented (v2.0.0 - Code Generation + Execution)</p> <p>Role: Generate and execute test suites</p> <p>Input: All previous agent outputs</p> <p>Output: Complete test files + test execution results</p> <p>Generates:</p> <ul> <li>Unit tests (<code>tests/unit/</code> or equivalent)</li> <li>Integration tests (<code>tests/integration/</code> or equivalent)</li> <li>Test configuration (test framework config, test setup files)</li> </ul> <p>Executes: Automatically runs tests after generation and reports results</p>"},{"location":"AGENTS/#how-agents-work","title":"How Agents Work","text":"<p>Agents use a file-based task queue where prompts are placed in <code>in/</code> directories, processed by Docker containers, and results are written to <code>out/</code> directories. See Architecture for technical details.</p>"},{"location":"AGENTS/#watcher-process","title":"Watcher Process","text":"<p>Each agent runs as a Docker container:</p> <ol> <li>Polls <code>in/</code> directory every 2 seconds</li> <li>Finds new <code>.md</code> files</li> <li>Reads prompt content</li> <li>Calls Claude API with agent-specific system prompt</li> <li>Writes response to <code>out/</code></li> <li>Extracts code patches from markdown (if agent generates code)</li> <li>Applies code patches to feature branch worktree</li> <li>Runs tests (Test agent only)</li> <li>Renames input file to <code>.processed</code></li> <li>Logs activity to <code>log/</code></li> </ol> <p>Code Generation Flow:</p> <ul> <li>Agents 02-05 generate code using special markdown format</li> <li>Code blocks include file paths and actions (create/update/delete)</li> <li>Watcher automatically extracts and applies code to worktree</li> <li>All changes are git-tracked in the feature branch</li> <li>Human reviews complete feature at <code>weft feature review</code></li> </ul>"},{"location":"AGENTS/#agent-isolation","title":"Agent Isolation","text":"<ul> <li>Each agent runs in separate container</li> <li>Read-only access to code repository</li> <li>Write access to AI history</li> <li>Independent scaling</li> <li>Isolated failures</li> </ul>"},{"location":"AGENTS/#prompt-specifications","title":"Prompt Specifications","text":"<p>Agent behavior is defined by versioned prompt specs in <code>.weft/prompts/v{version}/</code>.</p>"},{"location":"AGENTS/#prompt-spec-versions","title":"Prompt Spec Versions","text":"<p>v1.0.0 (Design-only):</p> <ul> <li>Agents output specifications and documentation</li> <li>No code generation</li> <li>Human implements based on specs</li> </ul> <p>v2.0.0 (Code Generation):</p> <ul> <li>Agents output executable code in markdown</li> <li>Code blocks include file paths and actions</li> <li>Automatic code application to feature branch</li> <li>Used by agents 02-05</li> </ul>"},{"location":"AGENTS/#code-generation-format-v200","title":"Code Generation Format (v2.0.0)","text":"<pre><code>```&lt;language&gt; path=&lt;file-path&gt; action=&lt;create|update|delete&gt;\n// Example: API client configuration\n\nconfig = {\n  baseURL: env.API_URL,\n  timeout: 30000,\n  headers: {\n    'Content-Type': 'application/json',\n  },\n}\n\nclient = createHTTPClient(config)\nexport client\n```\n</code></pre> <p>Parameters:</p> <ul> <li><code>path</code>: File path relative to repo root</li> <li><code>action</code>: <code>create</code>, <code>update</code>, or <code>delete</code></li> <li><code>&lt;language&gt;</code>: Language identifier matching your stack configuration (e.g., <code>typescript</code>, <code>python</code>, <code>go</code>, <code>rust</code>, <code>yaml</code>, etc.)</li> </ul>"},{"location":"AGENTS/#structure","title":"Structure","text":"<pre><code># Agent: Integration (04)\n\n## Role\nYou are a software integration architect...\n\n## Output Format\n**IMPORTANT:** Generate complete, executable code files...\n\n```&lt;language&gt; path=&lt;file-path&gt; action=&lt;create|update|delete&gt;\n&lt;complete file content&gt;\n```\n\n## Design Patterns\n[Complete code examples]\n\n## Quality Standards\n- Complete files (no placeholders)\n- All imports included\n- Type definitions defined (if applicable to language)\n</code></pre>"},{"location":"AGENTS/#customization","title":"Customization","text":"<pre><code># Copy default specs\ncp -r .weft/prompts/v1.0.0 .weft/prompts/v1.1.0\n\n# Edit for your needs\nvim .weft/prompts/v1.1.0/00_meta.md\n\n# Update .weftrc.yaml to use new version (planned feature)\n</code></pre>"},{"location":"AGENTS/#agent-configuration","title":"Agent Configuration","text":"<p>Control which agents are active in <code>.weftrc.yaml</code>:</p> <pre><code>agents:\n  enabled:\n    - meta\n    - architect\n  disabled:\n    - openapi\n    - ui\n</code></pre> <p>Start runtime with enabled agents:</p> <pre><code>weft up\n# Starts: watcher-meta, watcher-architect\n</code></pre>"},{"location":"AGENTS/#best-practices","title":"Best Practices","text":""},{"location":"AGENTS/#sequential-processing","title":"Sequential Processing","text":"<p>Process agents in order:</p> <ol> <li>Meta (understanding)</li> <li>Architect (design)</li> <li>OpenAPI (spec)</li> <li>UI (components)</li> <li>Integration (wiring)</li> <li>Test (validation)</li> </ol>"},{"location":"AGENTS/#human-review","title":"Human Review","text":"<p>Design Phase (Agents 00-01):</p> <ul> <li>Review design brief and architecture before proceeding</li> <li>Refine prompts if needed</li> </ul> <p>Code Generation Phase (Agents 02-05):</p> <ul> <li>Agents automatically generate and apply code to feature branch</li> <li>Code changes are git-tracked in isolated worktree</li> <li>No intermediate review needed - agents work in sequence</li> </ul> <p>Final Review:</p> <ul> <li>Run <code>weft feature review &lt;feature&gt;</code> to review and decide on feature (accept/drop/continue)</li> <li>View AI-generated files summary</li> <li>Review test results</li> <li>Inspect code in worktree before merging to main</li> </ul> <p>This allows agents to iterate and refine code without human intervention, with a single comprehensive review gate at the end.</p>"},{"location":"AGENTS/#iteration","title":"Iteration","text":"<p>Re-run agents with refined prompts as needed:</p> <pre><code># Initial run\necho \"Add auth\" &gt; ai-history/feat/00-meta/in/v1.md\n\n# After review, refine\necho \"Add auth with OAuth support\" &gt; ai-history/feat/00-meta/in/v2.md\n</code></pre>"},{"location":"AGENTS/#combining-outputs","title":"Combining Outputs","text":"<p>Later agents build on earlier outputs:</p> <pre><code># Architect uses Meta's output as input\ncp ai-history/feat/00-meta/out/result.md \\\n   ai-history/feat/01-architect/in/design_brief.md\n</code></pre>"},{"location":"AGENTS/#monitoring-agents","title":"Monitoring Agents","text":""},{"location":"AGENTS/#view-logs","title":"View Logs","text":"<pre><code># Real-time logs\nweft logs meta --follow\n\n# Last 50 lines\nweft logs architect --tail 50\n</code></pre>"},{"location":"AGENTS/#check-status","title":"Check Status","text":"<pre><code># Feature status shows agent activity\nweft feature status my-feature\n</code></pre>"},{"location":"AGENTS/#debug-issues","title":"Debug Issues","text":"<pre><code># Check container is running\ndocker ps | grep watcher-meta\n\n# View container logs\ndocker logs weft-watcher-meta\n\n# Inspect prompt file\ncat ai-history/feat/00-meta/in/prompt.md\n</code></pre>"},{"location":"AGENTS/#see-also","title":"See Also","text":"<ul> <li>CLI Reference - Agent commands</li> <li>Configuration - Agent configuration</li> <li>Architecture - Technical details</li> <li>Troubleshooting - Agent issues</li> </ul>"},{"location":"ARCHITECTURE/","title":"Architecture","text":"<p>Technical architecture and design decisions for Weft.</p>"},{"location":"ARCHITECTURE/#overview","title":"Overview","text":"<p>Weft is a Python CLI application that orchestrates Docker containers running AI agents. It uses file-based task queues for communication and maintains strict separation between code and AI artifacts.</p>"},{"location":"ARCHITECTURE/#system-architecture","title":"System Architecture","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  User's Project (Git Repository)                   \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510               \u2502\n\u2502  \u2502 .weftrc.yaml  \u2502  \u2502  .weft/      \u2502               \u2502\n\u2502  \u2502 Configuration \u2502  \u2502  Runtime dir \u2502               \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518               \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510             \u2502\n\u2502  \u2502  src/                             \u2502             \u2502\n\u2502  \u2502  Actual application code          \u2502             \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518             \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2193 reads\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Weft CLI (Python Application)                     \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                \u2502\n\u2502  \u2502 CLI Commands \u2502  \u2502 Config Mgmt  \u2502                \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510                \u2502\n\u2502  \u2502 Docker Mgmt  \u2502  \u2502 Feature State\u2502                \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518                \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2193 launches\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Docker Runtime                                    \u2502\n\u2502  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510  \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510 \u2502\n\u2502  \u2502 watcher-    \u2502  \u2502 watcher-    \u2502  \u2502 watcher-    \u2502 \u2502\n\u2502  \u2502 meta        \u2502  \u2502 architect   \u2502  \u2502 openapi     \u2502 \u2502\n\u2502  \u2502             \u2502  \u2502             \u2502  \u2502             \u2502 \u2502\n\u2502  \u2502 Polls in/   \u2502  \u2502 Polls in/   \u2502  \u2502 Polls in/   \u2502 \u2502\n\u2502  \u2502 Calls API   \u2502  \u2502 Calls API   \u2502  \u2502 Calls API   \u2502 \u2502\n\u2502  \u2502 Writes out/ \u2502  \u2502 Writes out/ \u2502  \u2502 Writes out/ \u2502 \u2502\n\u2502  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518  \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518 \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n                     \u2193 writes to\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  AI History Repository (Separate Git Repo)         \u2502\n\u2502  feature-name/                                     \u2502\n\u2502  \u251c\u2500\u2500 00-meta/                                      \u2502\n\u2502  \u2502   \u251c\u2500\u2500 in/       \u2190 Input prompts                 \u2502\n\u2502  \u2502   \u251c\u2500\u2500 out/      \u2190 Agent outputs                 \u2502\n\u2502  \u2502   \u2514\u2500\u2500 log/      \u2190 Processing logs               \u2502\n\u2502  \u251c\u2500\u2500 01-architect/                                 \u2502\n\u2502  \u2502   \u251c\u2500\u2500 in/                                       \u2502\n\u2502  \u2502   \u251c\u2500\u2500 out/                                      \u2502\n\u2502  \u2502   \u2514\u2500\u2500 log/                                      \u2502\n\u2502  \u2514\u2500\u2500 ...                                           \u2502\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ARCHITECTURE/#per-project-docker-configuration","title":"Per-Project Docker Configuration","text":""},{"location":"ARCHITECTURE/#design-decision","title":"Design Decision","text":"<p>Each project gets its own <code>docker-compose.yml</code> in <code>.weft/</code> directory. This enables:</p> <p>Multiple Projects Simultaneously: <pre><code># Python project\ncd ~/projects/my-python-api\nweft up  # Containers: my-python-api-watcher-meta, etc.\n\n# PHP project\ncd ~/projects/my-php-app\nweft up  # Containers: my-php-app-watcher-meta, etc.\n\n# No conflicts! Both run at the same time\n</code></pre></p> <p>Stack-Specific Configurations: - Python projects can mount different dependencies - PHP projects can use different base images - Node projects can customize npm/yarn configs - Each project's Docker setup is version controlled</p> <p>Container Naming: - Before: <code>weft-watcher-meta</code> (global, conflicts) - After: <code>my-python-api-weft-watcher-meta-1</code> (project-scoped) - Network: <code>my-python-api_weft-network</code></p>"},{"location":"ARCHITECTURE/#implementation","title":"Implementation","text":"<p>Uses Docker Compose's built-in <code>COMPOSE_PROJECT_NAME</code> environment variable:</p> <ol> <li>Template: <code>src/weft/templates/docker-compose.yml</code> uses fixed names (no variables)</li> <li>Services: <code>watcher-meta</code>, <code>watcher-architect</code>, etc.</li> <li>Networks: <code>weft-network</code></li> <li> <p>Images: <code>weft-watcher:latest</code></p> </li> <li> <p>Init: <code>weft init</code> copies template to <code>.weft/docker-compose.yml</code></p> </li> <li> <p>Runtime: Commands look for <code>.weft/docker-compose.yml</code> first, then template</p> </li> <li> <p>Environment: <code>COMPOSE_PROJECT_NAME</code> set from <code>.weftrc.yaml</code> config</p> </li> <li><code>helpers.py</code> reads <code>config.project.name</code> and sets <code>env[\"COMPOSE_PROJECT_NAME\"]</code></li> <li> <p>Docker Compose automatically prefixes all resource names</p> </li> <li> <p>Automatic Prefixing: Docker Compose handles namespacing</p> </li> <li>Container: <code>weft-watcher-meta</code> \u2192 <code>my-python-api-weft-watcher-meta-1</code></li> <li>Network: <code>weft-network</code> \u2192 <code>my-python-api_weft-network</code></li> <li>Image: <code>weft-watcher:latest</code> \u2192 <code>my-python-api-weft-watcher:latest</code></li> </ol> <p>Why Not Variable Substitution? Docker Compose does not support variable substitution in top-level keys like network names: <pre><code># \u274c Invalid - causes \"refers to undefined network\" error\nnetworks:\n  ${PROJECT_NAME}-network:\n    driver: bridge\n\n# \u2705 Valid - Docker handles prefixing\nnetworks:\n  weft-network:\n    driver: bridge\n</code></pre></p> <p>Directory Structure: <pre><code>my-project/\n  .weft/\n    docker-compose.yml   \u2190 Project-specific, customizable\n    prompts/            \u2190 Also per-project\n    features/\n  .weftrc.yaml          \u2190 Contains project.name\n</code></pre></p>"},{"location":"ARCHITECTURE/#core-components","title":"Core Components","text":""},{"location":"ARCHITECTURE/#cli-layer","title":"CLI Layer","text":"<p>Location: <code>src/weft/cli/</code></p> <p>Responsibility: User interface</p> <p>Key modules:</p> <ul> <li><code>main.py</code> - Entry point, command registration</li> <li><code>project_init.py</code> - Project initialization</li> <li><code>runtime.py</code> - Docker lifecycle (up, down, logs)</li> <li><code>feature_*.py</code> - Feature management commands</li> </ul> <p>Design:</p> <ul> <li>Built with Click framework</li> <li>Commands grouped logically</li> <li>Error handling at command level</li> <li>Configuration loaded once per invocation</li> </ul>"},{"location":"ARCHITECTURE/#configuration-layer","title":"Configuration Layer","text":"<p>Location: <code>src/weft/config/</code></p> <p>Responsibility: Configuration management</p> <p>Key modules:</p> <ul> <li><code>project.py</code> - <code>.weftrc.yaml</code> loading and validation</li> <li><code>env.py</code> - Environment variable handling</li> <li><code>runtime.py</code> - Runtime directory structure</li> <li><code>errors.py</code> - Configuration exceptions</li> </ul> <p>Design:</p> <ul> <li>Pydantic models for validation</li> <li>Security checks (no secrets in YAML)</li> <li>Default values for all optional fields</li> <li>Clear error messages</li> </ul>"},{"location":"ARCHITECTURE/#agent-layer","title":"Agent Layer","text":"<p>Location: <code>src/weft/agents/</code></p> <p>Responsibility: AI agent implementations</p> <p>Key modules:</p> <ul> <li><code>meta_agent.py</code> - Feature understanding</li> <li><code>architect_agent.py</code> - Technical design</li> <li><code>openapi_agent.py</code> - API specification (planned)</li> <li><code>ui_agent.py</code> - UI design (planned)</li> <li><code>integration_agent.py</code> - Integration (planned)</li> <li><code>test_agent.py</code> - Test generation (planned)</li> </ul> <p>Design:</p> <ul> <li>Each agent is a standalone module</li> <li>Can be run directly or via watcher</li> <li>Uses prompt specifications from <code>.weft/prompts/</code></li> <li>Stateless processing</li> </ul>"},{"location":"ARCHITECTURE/#ai-backend-layer","title":"AI Backend Layer","text":"<p>Location: <code>src/weft/ai/</code></p> <p>Responsibility: AI API integration</p> <p>Key modules:</p> <ul> <li><code>backend.py</code> - Abstract backend interface</li> <li><code>claude_client.py</code> - Anthropic Claude integration</li> <li><code>local_client.py</code> - Local LLM integration (planned)</li> </ul> <p>Design:</p> <ul> <li>Abstract interface for multiple providers</li> <li>Error handling and retries</li> <li>Token counting and cost tracking (planned)</li> <li>Rate limiting (planned)</li> </ul>"},{"location":"ARCHITECTURE/#git-layer","title":"Git Layer","text":"<p>Location: <code>src/weft/git/</code></p> <p>Responsibility: Git operations</p> <p>Key modules:</p> <ul> <li><code>worktree.py</code> - Git worktree management</li> <li><code>repo.py</code> - Repository operations (planned)</li> </ul> <p>Design:</p> <ul> <li>Wrapper around git commands</li> <li>Safety checks before operations</li> <li>Worktree isolation per feature (planned)</li> </ul>"},{"location":"ARCHITECTURE/#history-layer","title":"History Layer","text":"<p>Location: <code>src/weft/history/</code></p> <p>Responsibility: AI history management</p> <p>Key modules:</p> <ul> <li><code>repo_manager.py</code> - AI history repository</li> <li><code>artifact.py</code> - Artifact tracking (planned)</li> </ul> <p>Design:</p> <ul> <li>Separate git repository</li> <li>Feature-based organization</li> <li>Agent-specific directories</li> <li>Auto-commit on outputs (planned)</li> </ul>"},{"location":"ARCHITECTURE/#feature-state-machine","title":"Feature State Machine","text":"<p>Location: <code>src/weft/state/feature_state.py</code></p> <p>Responsibility: Track feature lifecycle from creation to completion or drop</p>"},{"location":"ARCHITECTURE/#states","title":"States","text":"State Description Terminal <code>DRAFT</code> Feature created, spec not yet approved No <code>IN_PROGRESS</code> Agents are processing the feature No <code>READY</code> All agents complete, ready for review No <code>MERGE_CONFLICT</code> Merge attempt failed, conflicts need resolution No <code>COMPLETED</code> Feature merged to main branch Yes <code>DROPPED</code> Feature abandoned without merging Yes"},{"location":"ARCHITECTURE/#state-transitions","title":"State Transitions","text":"<pre><code>DRAFT\n  \u251c\u2192 IN_PROGRESS  (start agents)\n  \u2514\u2192 DROPPED      (abandon early)\n\nIN_PROGRESS\n  \u251c\u2192 READY        (all agents done)\n  \u251c\u2192 DRAFT        (back to spec)\n  \u2514\u2192 DROPPED      (abandon)\n\nREADY\n  \u251c\u2192 COMPLETED        (merge succeeds)\n  \u251c\u2192 MERGE_CONFLICT   (merge fails)\n  \u251c\u2192 IN_PROGRESS      (need more work)\n  \u2514\u2192 DROPPED          (abandon)\n\nMERGE_CONFLICT\n  \u251c\u2192 COMPLETED    (conflicts resolved, merge succeeds)\n  \u251c\u2192 READY        (reset to retry merge)\n  \u2514\u2192 DROPPED      (give up on feature)\n\nCOMPLETED  (terminal - no transitions)\nDROPPED    (terminal - no transitions)\n</code></pre>"},{"location":"ARCHITECTURE/#merge-conflict-handling","title":"Merge Conflict Handling","text":"<p>Problem: When a feature merge fails (e.g., untracked files conflict), the feature shouldn't be auto-dropped.</p> <p>Solution: <code>MERGE_CONFLICT</code> state preserves the feature for resolution:</p> <ol> <li>Merge fails \u2192 state transitions to <code>MERGE_CONFLICT</code></li> <li>Error captured \u2192 <code>merge_error</code> field stores error message</li> <li> <p>User options:</p> <ul> <li>Fix conflicts manually, then run <code>weft feature review</code> again \u2192 retry merge</li> <li>Run <code>weft feature drop</code> to abandon</li> <li>Continue reviewing with <code>weft feature review</code> (worktree preserved)</li> </ul> </li> </ol> <p>Benefits:</p> <ul> <li>Work not lost on merge failure</li> <li>Can review generated code even after merge fails</li> <li>Allows manual conflict resolution</li> <li>Matches real development workflows (PR with conflicts stays open)</li> </ul> <p>Example Workflow: <pre><code># Feature ready, attempt merge\n$ weft feature review my-feature\n# Choose \"accept\"\n\u274c Error merging: untracked files would be overwritten\n\u26a0\ufe0f  Feature state updated to 'merge-conflict'\n\n\ud83d\udca1 To resolve conflicts:\n  1. cd /path/to/repo\n  2. Resolve conflicts\n  3. git add &lt;resolved-files&gt;\n  4. git merge --continue\n\n\ud83d\udca1 Then retry the merge:\n  weft feature review my-feature\n\n# After fixing conflicts\n$ weft feature review my-feature\n# Choose \"accept\" again - merge succeeds\n\u2713 Merged to main\n</code></pre></p>"},{"location":"ARCHITECTURE/#state-persistence","title":"State Persistence","text":"<p>Format: YAML files in <code>.weft/features/&lt;feature-name&gt;/state.yaml</code></p> <p>Fields:</p> <ul> <li><code>feature_name</code> - Feature identifier</li> <li><code>status</code> - Current state (enum value)</li> <li><code>created_at</code> - ISO timestamp</li> <li><code>last_activity</code> - ISO timestamp</li> <li><code>transitions</code> - Full history of state changes</li> <li><code>merge_commit</code> - Git SHA when completed (optional)</li> <li><code>merge_error</code> - Error message when merge fails (optional)</li> <li><code>drop_reason</code> - Reason for dropping (optional)</li> </ul> <p>Example: <pre><code>feature_name: user-auth\nstatus: merge-conflict\ncreated_at: '2026-01-02T10:00:00Z'\nlast_activity: '2026-01-02T10:05:00Z'\ntransitions:\n  - from_state: null\n    to_state: draft\n    timestamp: '2026-01-02T10:00:00Z'\n    reason: Feature created\n  - from_state: draft\n    to_state: in-progress\n    timestamp: '2026-01-02T10:01:00Z'\n    reason: Spec approved\n  - from_state: in-progress\n    to_state: ready\n    timestamp: '2026-01-02T10:04:00Z'\n    reason: All agents done\n  - from_state: ready\n    to_state: merge-conflict\n    timestamp: '2026-01-02T10:05:00Z'\n    reason: Merge failed\nmerge_error: 'error: The following untracked working tree files would be overwritten'\n</code></pre></p>"},{"location":"ARCHITECTURE/#key-design-decisions","title":"Key Design Decisions","text":""},{"location":"ARCHITECTURE/#file-based-task-queue","title":"File-Based Task Queue","text":"<p>Decision: Use filesystem as task queue instead of message broker</p> <p>Rationale:</p> <ul> <li>Simple and debuggable</li> <li>No additional infrastructure</li> <li>Easy to inspect and modify</li> <li>Natural fit for file-based AI interactions</li> </ul> <p>Tradeoffs:</p> <ul> <li>Polling overhead (mitigated by reasonable intervals)</li> <li>File system overhead (acceptable for scale)</li> <li>Not suitable for high-throughput (not our use case)</li> </ul>"},{"location":"ARCHITECTURE/#docker-for-agent-isolation","title":"Docker for Agent Isolation","text":"<p>Decision: Run each agent in a Docker container</p> <p>Rationale:</p> <ul> <li>Consistent environment</li> <li>Resource isolation</li> <li>Easy deployment</li> <li>Security boundaries</li> </ul> <p>Tradeoffs:</p> <ul> <li>Docker dependency</li> <li>Slightly higher resource usage</li> <li>More complex local development</li> </ul>"},{"location":"ARCHITECTURE/#separate-ai-history-repository","title":"Separate AI History Repository","text":"<p>Decision: Store AI artifacts in separate git repo</p> <p>Rationale:</p> <ul> <li>Clean separation of concerns</li> <li>Different access control</li> <li>Independent versioning</li> <li>Easier auditing</li> </ul> <p>Tradeoffs:</p> <ul> <li>Two repositories to manage</li> <li>More complex setup</li> <li>Path configuration needed</li> </ul>"},{"location":"ARCHITECTURE/#configuration-in-yaml","title":"Configuration in YAML","text":"<p>Decision: Use <code>.weftrc.yaml</code> for configuration</p> <p>Rationale:</p> <ul> <li>Human-readable</li> <li>Version control friendly</li> <li>Standard format</li> <li>Easy to edit</li> </ul> <p>Tradeoffs:</p> <ul> <li>YAML parsing complexity</li> <li>Limited validation</li> <li>Can't store secrets (by design)</li> </ul>"},{"location":"ARCHITECTURE/#security-architecture","title":"Security Architecture","text":""},{"location":"ARCHITECTURE/#threat-model","title":"Threat Model","text":"<p>Threats:</p> <ol> <li>Secret exposure in config files</li> <li>Malicious prompt injection</li> <li>Unauthorized access to code</li> <li>AI output tampering</li> <li>Supply chain attacks</li> </ol> <p>Mitigations:</p> <ol> <li>Secrets only in environment variables</li> <li>Input validation and sanitization</li> <li>Read-only code mounts</li> <li>Output hashing and verification (planned)</li> <li>Dependency pinning and scanning</li> </ol>"},{"location":"ARCHITECTURE/#security-boundaries","title":"Security Boundaries","text":"<pre><code>\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  User Shell     \u2502  Full access\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Weft CLI       \u2502  Validates inputs\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Docker         \u2502  Isolation layer\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Agent          \u2502  Read-only code access\n\u2502                 \u2502  Write AI history only\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u252c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n         \u2502\n\u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u25bc\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n\u2502  Claude API     \u2502  External service\n\u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ARCHITECTURE/#data-flow","title":"Data Flow","text":""},{"location":"ARCHITECTURE/#feature-development-flow","title":"Feature Development Flow","text":"<ol> <li> <p>User creates feature <pre><code>User \u2192 CLI \u2192 Feature state created\n</code></pre></p> </li> <li> <p>User submits prompt <pre><code>User \u2192 CLI \u2192 Prompt file created in ai-history/feature/00-meta/in/\n</code></pre></p> </li> <li> <p>Watcher processes <pre><code>Watcher polls \u2192 Finds prompt \u2192 Reads content\n</code></pre></p> </li> <li> <p>Agent executes <pre><code>Agent \u2192 Loads prompt spec \u2192 Calls Claude API \u2192 Receives response\n</code></pre></p> </li> <li> <p>Output written <pre><code>Agent \u2192 Writes to ai-history/feature/00-meta/out/ \u2192 Logs to log/\n</code></pre></p> </li> <li> <p>User reviews <pre><code>User \u2192 Reads output \u2192 Decides next action\n</code></pre></p> </li> <li> <p>Repeat for next agent <pre><code>User \u2192 Submits to architect \u2192 Watcher processes \u2192 ...\n</code></pre></p> </li> </ol>"},{"location":"ARCHITECTURE/#scaling-considerations","title":"Scaling Considerations","text":""},{"location":"ARCHITECTURE/#current-scale","title":"Current Scale","text":"<ul> <li>Features: 1-10 concurrent</li> <li>Agents: 2-6 per feature</li> <li>Requests: Low volume (human-paced)</li> <li>Users: Single developer</li> </ul>"},{"location":"ARCHITECTURE/#future-scale-m3","title":"Future Scale (M3+)","text":"<ul> <li>Features: 100+ concurrent</li> <li>Agents: 6+ per feature</li> <li>Requests: Higher volume (automated)</li> <li>Users: Teams (10-100 developers)</li> </ul>"},{"location":"ARCHITECTURE/#scaling-strategy","title":"Scaling Strategy","text":"<ol> <li>Horizontal: Run multiple watcher containers per agent</li> <li>Vertical: Larger container resources</li> <li>Caching: Cache prompt specs and common responses</li> <li>Batching: Batch API requests (planned)</li> <li>Queue: Move to proper message queue if needed</li> </ol>"},{"location":"ARCHITECTURE/#technology-choices","title":"Technology Choices","text":""},{"location":"ARCHITECTURE/#current-stack","title":"Current Stack","text":"Layer Technology Reason Language Python 3.11+ Productivity, libraries, typing CLI Click Feature-rich, popular Validation Pydantic Type safety, validation Containers Docker Standard, isolated AI Claude (Anthropic) Quality, reasoning Config YAML Human-readable Storage Git Versioning, audit trail"},{"location":"ARCHITECTURE/#future-additions-planned","title":"Future Additions (Planned)","text":"Layer Technology Reason Observability OpenTelemetry Standard, vendor-neutral Metrics Prometheus De facto standard Dashboards Grafana Rich visualization Local LLM Ollama Offline support Orchestration Kubernetes Enterprise scale"},{"location":"ARCHITECTURE/#performance-characteristics","title":"Performance Characteristics","text":""},{"location":"ARCHITECTURE/#current-performance","title":"Current Performance","text":"<ul> <li>Startup: &lt; 5 seconds (cold start with Docker)</li> <li>Agent response: 2-10 seconds (depends on model)</li> <li>CLI commands: &lt; 1 second (most operations)</li> <li>Memory: ~100 MB per watcher container</li> <li>Disk: Minimal (text artifacts only)</li> </ul>"},{"location":"ARCHITECTURE/#optimization-targets-m3","title":"Optimization Targets (M3+)","text":"<ul> <li>Startup: &lt; 2 seconds</li> <li>Agent response: &lt; 5 seconds (with caching)</li> <li>Throughput: 100+ requests/minute</li> <li>Memory: &lt; 50 MB per watcher</li> </ul>"},{"location":"ARCHITECTURE/#testing-strategy","title":"Testing Strategy","text":""},{"location":"ARCHITECTURE/#test-pyramid","title":"Test Pyramid","text":"<pre><code>        \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n        \u2502   E2E   \u2502      Few, critical flows\n        \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n      \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n      \u2502 Integration \u2502    Component interactions\n      \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n    \u250c\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2510\n    \u2502    Unit Tests   \u2502  Most tests here\n    \u2514\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2500\u2518\n</code></pre>"},{"location":"ARCHITECTURE/#coverage-requirements","title":"Coverage Requirements","text":"<ul> <li>Unit: 95%+ coverage</li> <li>Integration: Key workflows</li> <li>E2E: Happy path + critical errors</li> </ul>"},{"location":"ARCHITECTURE/#testing-approach","title":"Testing Approach","text":"<ul> <li>TDD where practical</li> <li>Fast unit tests (&lt;1s total)</li> <li>Isolated integration tests</li> <li>Mock external services</li> <li>Use fixtures for common setups</li> </ul>"},{"location":"ARCHITECTURE/#future-architecture","title":"Future Architecture","text":""},{"location":"ARCHITECTURE/#planned-enhancements","title":"Planned Enhancements","text":"<ol> <li>Event-Driven: Move to event bus for better scaling</li> <li>Async: Use async Python for concurrency</li> <li>Caching: Redis for response caching</li> <li>Queue: RabbitMQ or Kafka for high throughput</li> <li>API: REST API for programmatic access</li> </ol>"},{"location":"ARCHITECTURE/#migration-path","title":"Migration Path","text":"<ol> <li>Keep file-based for simplicity</li> <li>Add event bus alongside</li> <li>Migrate high-volume operations</li> <li>Remove file polling when ready</li> </ol>"},{"location":"ARCHITECTURE/#see-also","title":"See Also","text":"<ul> <li>Development Guide - Contributing</li> <li>Configuration - Config reference</li> </ul>"},{"location":"CLI-REFERENCE/","title":"CLI Reference","text":"<p>Complete reference for all <code>weft</code> commands.</p>"},{"location":"CLI-REFERENCE/#global-options","title":"Global Options","text":"<p>These options work with all commands:</p> <pre><code>weft [GLOBAL OPTIONS] COMMAND [COMMAND OPTIONS]\n</code></pre> Option Description <code>--config PATH</code> Path to config file (default: <code>.env</code>) <code>--verbose, -v</code> Enable verbose output <code>--version</code> Show version and exit <code>--help</code> Show help message and exit"},{"location":"CLI-REFERENCE/#commands-overview","title":"Commands Overview","text":"Command Description <code>weft init</code> Initialize a new Weft project <code>weft up</code> Start the Docker runtime <code>weft down</code> Stop the Docker runtime <code>weft logs</code> View logs from agent watchers <code>weft submit</code> Submit a prompt to an agent <code>weft feature</code> Manage features (create, start, list, status, accept, drop)"},{"location":"CLI-REFERENCE/#weft-init","title":"<code>weft init</code>","text":"<p>Initialize Weft in the current project directory.</p>"},{"location":"CLI-REFERENCE/#synopsis","title":"Synopsis","text":"<pre><code>weft init [OPTIONS]\n</code></pre>"},{"location":"CLI-REFERENCE/#description","title":"Description","text":"<p>Creates necessary configuration files and directories for Weft:</p> <ul> <li><code>.weftrc.yaml</code> - Project configuration</li> <li><code>.weft/</code> - Runtime directory structure</li> <li><code>.weft/docker-compose.yml</code> - Project-specific Docker configuration</li> <li><code>.weft/prompts/</code> - Agent prompt specifications (customizable per project)</li> <li>AI history repository (in parent directory by default)</li> </ul> <p>If project is already initialized, shows a friendly message.</p>"},{"location":"CLI-REFERENCE/#options","title":"Options","text":"Option Type Description <code>--project-name TEXT</code> String Name of the project <code>--project-type CHOICE</code> <code>backend</code>|<code>frontend</code>|<code>fullstack</code> Type of project <code>--ai-provider CHOICE</code> <code>claude</code>|<code>ollama</code>|<code>other</code> AI provider to use <code>--ai-history-path PATH</code> Path Path to AI history repository <code>--model TEXT</code> String Specific AI model (e.g., <code>claude-3-5-sonnet-20241022</code>) <p>If options aren't provided, you'll be prompted interactively.</p>"},{"location":"CLI-REFERENCE/#examples","title":"Examples","text":"<pre><code># Interactive initialization\nweft init\n\n# Non-interactive with all options\nweft init \\\n  --project-name my-app \\\n  --project-type fullstack \\\n  --ai-provider claude \\\n  --ai-history-path ../weft-ai-history \\\n  --model claude-3-5-sonnet-20241022\n</code></pre>"},{"location":"CLI-REFERENCE/#exit-codes","title":"Exit Codes","text":"<ul> <li><code>0</code> - Success</li> <li><code>1</code> - Error (missing dependencies, permission denied, etc.)</li> </ul>"},{"location":"CLI-REFERENCE/#weft-up","title":"<code>weft up</code>","text":"<p>Start the Docker runtime environment with agent watchers.</p>"},{"location":"CLI-REFERENCE/#synopsis_1","title":"Synopsis","text":"<pre><code>weft up [OPTIONS]\n</code></pre>"},{"location":"CLI-REFERENCE/#description_1","title":"Description","text":"<p>Starts Docker containers for all enabled agents defined in <code>.weftrc.yaml</code>. Each agent runs as a \"watcher\" that monitors for new prompts and processes them using the configured AI backend.</p> <p>Validates:</p> <ul> <li>Docker is installed and daemon is running</li> <li><code>.weftrc.yaml</code> exists</li> <li>API keys are set (via environment variables)</li> </ul>"},{"location":"CLI-REFERENCE/#options_1","title":"Options","text":"Option Type Default Description <code>--detach, -d</code> Flag <code>true</code> Run containers in background <code>--no-detach, -D</code> Flag - Run containers in foreground (attach to logs)"},{"location":"CLI-REFERENCE/#environment-variables","title":"Environment Variables","text":"<p>Required:</p> <ul> <li><code>ANTHROPIC_API_KEY</code> or <code>WEFT_ANTHROPIC_API_KEY</code> - Claude API key</li> </ul> <p>Optional:</p> <ul> <li><code>AI_BACKEND</code> - Override backend (default: from <code>.weftrc.yaml</code>)</li> <li><code>CLAUDE_MODEL</code> - Override model (default: from <code>.weftrc.yaml</code>)</li> <li><code>POLL_INTERVAL</code> - Watcher poll interval in seconds (default: 2)</li> </ul>"},{"location":"CLI-REFERENCE/#examples_1","title":"Examples","text":"<pre><code># Start in background (default)\nweft up\n\n# Start and attach to logs\nweft up --no-detach\n\n# Start with custom model\nCLAUDE_MODEL=claude-3-opus-20240229 weft up\n</code></pre>"},{"location":"CLI-REFERENCE/#exit-codes_1","title":"Exit Codes","text":"<ul> <li><code>0</code> - Services started successfully</li> <li><code>1</code> - Docker not installed, daemon not running, or startup failed</li> </ul>"},{"location":"CLI-REFERENCE/#see-also","title":"See Also","text":"<ul> <li><code>weft down</code> - Stop the runtime</li> <li><code>weft logs</code> - View runtime logs</li> </ul>"},{"location":"CLI-REFERENCE/#weft-down","title":"<code>weft down</code>","text":"<p>Stop the Docker runtime environment.</p>"},{"location":"CLI-REFERENCE/#synopsis_2","title":"Synopsis","text":"<pre><code>weft down [OPTIONS]\n</code></pre>"},{"location":"CLI-REFERENCE/#description_2","title":"Description","text":"<p>Stops all running watcher containers and optionally removes volumes.</p>"},{"location":"CLI-REFERENCE/#options_2","title":"Options","text":"Option Type Description <code>--volumes, -v</code> Flag Remove named volumes"},{"location":"CLI-REFERENCE/#examples_2","title":"Examples","text":"<pre><code># Stop services (keep volumes)\nweft down\n\n# Stop and remove volumes\nweft down --volumes\n</code></pre>"},{"location":"CLI-REFERENCE/#exit-codes_2","title":"Exit Codes","text":"<ul> <li><code>0</code> - Services stopped successfully</li> <li><code>1</code> - Docker not available or stop failed</li> </ul>"},{"location":"CLI-REFERENCE/#see-also_1","title":"See Also","text":"<ul> <li><code>weft up</code> - Start the runtime</li> <li><code>weft logs</code> - View logs before stopping</li> </ul>"},{"location":"CLI-REFERENCE/#weft-logs","title":"<code>weft logs</code>","text":"<p>View logs from agent watcher containers.</p>"},{"location":"CLI-REFERENCE/#synopsis_3","title":"Synopsis","text":"<pre><code>weft logs [AGENT] [OPTIONS]\n</code></pre>"},{"location":"CLI-REFERENCE/#description_3","title":"Description","text":"<p>Displays logs from Docker containers running agent watchers. Can show logs for a specific agent or all agents.</p>"},{"location":"CLI-REFERENCE/#arguments","title":"Arguments","text":"Argument Description <code>AGENT</code> Agent name (optional). One of: <code>meta</code>, <code>architect</code>, <code>openapi</code>, <code>ui</code>, <code>integration</code>, <code>test</code>"},{"location":"CLI-REFERENCE/#options_3","title":"Options","text":"Option Type Default Description <code>--follow, -f</code> Flag <code>false</code> Follow log output (stream live) <code>--tail, -n NUM</code> Integer <code>100</code> Number of lines to show from end"},{"location":"CLI-REFERENCE/#examples_3","title":"Examples","text":"<pre><code># View last 100 lines from meta agent\nweft logs meta\n\n# Stream meta agent logs in real-time\nweft logs meta --follow\n\n# View last 50 lines from all agents\nweft logs --tail 50\n\n# Stream all logs\nweft logs --follow\n</code></pre>"},{"location":"CLI-REFERENCE/#exit-codes_3","title":"Exit Codes","text":"<ul> <li><code>0</code> - Logs displayed successfully (or user interrupted with Ctrl+C)</li> <li><code>1</code> - Docker not available or container not found</li> </ul>"},{"location":"CLI-REFERENCE/#tips","title":"Tips","text":"<ul> <li>Use <code>--follow</code> to watch agents process prompts in real-time</li> <li>Press <code>Ctrl+C</code> to stop following logs</li> <li>Check logs if agents aren't processing prompts</li> </ul>"},{"location":"CLI-REFERENCE/#weft-submit","title":"<code>weft submit</code>","text":"<p>Submit a prompt to a specific agent.</p>"},{"location":"CLI-REFERENCE/#synopsis_4","title":"Synopsis","text":"<pre><code>weft submit FEATURE_ID AGENT [PROMPT_TEXT] [OPTIONS]\n</code></pre>"},{"location":"CLI-REFERENCE/#description_4","title":"Description","text":"<p>Creates a prompt file in the agent's <code>in/</code> directory. The watcher for that agent will automatically pick it up and process it.</p> <p>Note: This command is partially implemented. Current best practice is to manually create prompt files in the AI history repository.</p>"},{"location":"CLI-REFERENCE/#arguments_1","title":"Arguments","text":"Argument Description <code>FEATURE_ID</code> Feature identifier (e.g., <code>user-auth</code>) <code>AGENT</code> Agent to submit to: <code>00-meta</code>, <code>01-architect</code>, <code>02-openapi</code>, etc. <code>PROMPT_TEXT</code> Optional prompt text (if not provided, will prompt interactively)"},{"location":"CLI-REFERENCE/#options_4","title":"Options","text":"Option Type Description <code>--file PATH</code> Path Read prompt from file instead of text"},{"location":"CLI-REFERENCE/#examples_4","title":"Examples","text":"<pre><code># Submit text prompt\nweft submit user-auth 00-meta \"Create user authentication system\"\n\n# Submit from file\nweft submit user-auth 01-architect --file meta_output.md\n\n# Interactive prompt (not yet fully implemented)\nweft submit user-auth 00-meta\n</code></pre>"},{"location":"CLI-REFERENCE/#current-workaround","title":"Current Workaround","text":"<p>Until <code>weft submit</code> is fully implemented, use:</p> <pre><code># Navigate to AI history\ncd ../weft-ai-history/FEATURE_ID/AGENT_ID/in/\n\n# Create prompt file\ncat &gt; my_prompt.md &lt;&lt; 'EOF'\nYour prompt content here\nEOF\n\n# The watcher will automatically process it\n</code></pre>"},{"location":"CLI-REFERENCE/#weft-feature","title":"<code>weft feature</code>","text":"<p>Manage feature lifecycle.</p>"},{"location":"CLI-REFERENCE/#synopsis_5","title":"Synopsis","text":"<pre><code>weft feature SUBCOMMAND [OPTIONS]\n</code></pre>"},{"location":"CLI-REFERENCE/#subcommands","title":"Subcommands","text":"Subcommand Description <code>create</code> Create a new feature <code>start</code> Start working on a feature <code>list</code> List all features <code>status</code> Show feature status <code>review</code> Review and decide on feature (accept/drop/continue) <code>drop</code> Drop/cancel a feature"},{"location":"CLI-REFERENCE/#weft-feature-create","title":"<code>weft feature create</code>","text":"<p>Create a new feature.</p>"},{"location":"CLI-REFERENCE/#synopsis_6","title":"Synopsis","text":"<pre><code>weft feature create FEATURE_NAME [OPTIONS]\n</code></pre>"},{"location":"CLI-REFERENCE/#description_5","title":"Description","text":"<p>Creates a new feature with:</p> <ul> <li>State tracking in <code>.weft/features/</code></li> <li>Directory structure in AI history repository</li> <li>Preparation for agent execution</li> </ul>"},{"location":"CLI-REFERENCE/#arguments_2","title":"Arguments","text":"Argument Description <code>FEATURE_NAME</code> Name of the feature (use kebab-case: <code>user-auth</code>)"},{"location":"CLI-REFERENCE/#options_5","title":"Options","text":"Option Type Description <code>--description TEXT</code> String Feature description <code>--priority CHOICE</code> <code>low</code>|<code>medium</code>|<code>high</code> Feature priority"},{"location":"CLI-REFERENCE/#examples_5","title":"Examples","text":"<pre><code># Simple create\nweft feature create user-authentication\n\n# With metadata\nweft feature create user-authentication \\\n  --description \"Add JWT-based user authentication\" \\\n  --priority high\n</code></pre>"},{"location":"CLI-REFERENCE/#exit-codes_4","title":"Exit Codes","text":"<ul> <li><code>0</code> - Feature created successfully</li> <li><code>1</code> - Feature already exists or creation failed</li> </ul>"},{"location":"CLI-REFERENCE/#weft-feature-start","title":"<code>weft feature start</code>","text":"<p>Start working on a feature.</p>"},{"location":"CLI-REFERENCE/#synopsis_7","title":"Synopsis","text":"<pre><code>weft feature start FEATURE_NAME\n</code></pre>"},{"location":"CLI-REFERENCE/#description_6","title":"Description","text":"<p>Marks a feature as \"in progress\" and:</p> <ul> <li>Sets up feature workspace</li> <li>Creates agent directories in AI history</li> <li>Prepares for first agent (Meta)</li> </ul>"},{"location":"CLI-REFERENCE/#arguments_3","title":"Arguments","text":"Argument Description <code>FEATURE_NAME</code> Name of the feature to start"},{"location":"CLI-REFERENCE/#examples_6","title":"Examples","text":"<pre><code>weft feature start user-authentication\n</code></pre>"},{"location":"CLI-REFERENCE/#exit-codes_5","title":"Exit Codes","text":"<ul> <li><code>0</code> - Feature started successfully</li> <li><code>1</code> - Feature not found or already started</li> </ul>"},{"location":"CLI-REFERENCE/#weft-feature-list","title":"<code>weft feature list</code>","text":"<p>List all features.</p>"},{"location":"CLI-REFERENCE/#synopsis_8","title":"Synopsis","text":"<pre><code>weft feature list [OPTIONS]\n</code></pre>"},{"location":"CLI-REFERENCE/#description_7","title":"Description","text":"<p>Shows all features with their current status.</p>"},{"location":"CLI-REFERENCE/#options_6","title":"Options","text":"Option Type Description <code>--status CHOICE</code> <code>pending</code>|<code>in-progress</code>|<code>completed</code>|<code>dropped</code> Filter by status"},{"location":"CLI-REFERENCE/#examples_7","title":"Examples","text":"<pre><code># List all features\nweft feature list\n\n# List only in-progress features\nweft feature list --status in-progress\n</code></pre>"},{"location":"CLI-REFERENCE/#output-format","title":"Output Format","text":"<pre><code>FEATURE NAME            STATUS         CREATED\nuser-authentication     in-progress    2024-01-15 10:30\npayment-integration     pending        2024-01-16 14:22\nadmin-dashboard         completed      2024-01-10 09:15\n</code></pre>"},{"location":"CLI-REFERENCE/#weft-feature-status","title":"<code>weft feature status</code>","text":"<p>Show detailed status of a feature.</p>"},{"location":"CLI-REFERENCE/#synopsis_9","title":"Synopsis","text":"<pre><code>weft feature status FEATURE_NAME\n</code></pre>"},{"location":"CLI-REFERENCE/#description_8","title":"Description","text":"<p>Displays:</p> <ul> <li>Feature metadata</li> <li>Current status</li> <li>Which agents have processed</li> <li>Location of outputs</li> <li>Next steps</li> </ul>"},{"location":"CLI-REFERENCE/#arguments_4","title":"Arguments","text":"Argument Description <code>FEATURE_NAME</code> Name of the feature"},{"location":"CLI-REFERENCE/#examples_8","title":"Examples","text":"<pre><code>weft feature status user-authentication\n</code></pre>"},{"location":"CLI-REFERENCE/#output-format_1","title":"Output Format","text":"<pre><code>Feature: user-authentication\nStatus: in-progress\nCreated: 2024-01-15 10:30\n\nAgents:\n  \u2713 00-meta       Completed\n  \u2713 01-architect  Completed\n  \u29d7 02-openapi    Pending\n  - 03-ui         Not started\n  - 04-integration Not started\n  - 05-test       Not started\n\nAI History: /path/to/weft-ai-history/user-authentication/\n</code></pre>"},{"location":"CLI-REFERENCE/#weft-feature-review","title":"<code>weft feature review</code>","text":"<p>Review a feature's outputs and decide next steps (accept/drop/continue).</p>"},{"location":"CLI-REFERENCE/#synopsis_10","title":"Synopsis","text":"<pre><code>weft feature review FEATURE_NAME [OPTIONS]\n</code></pre>"},{"location":"CLI-REFERENCE/#description_9","title":"Description","text":"<p>Presents an interactive review of all agent outputs and allows you to:</p> <ul> <li>Accept: Merge feature to main branch and mark as completed</li> <li>Drop: Abandon feature and cleanup (optionally delete AI history)</li> <li>Continue: Keep feature active for further work</li> </ul> <p>The review displays:</p> <ul> <li>Summary of all agent outputs</li> <li>Generated files and changes</li> <li>Test results (if available)</li> <li>Code applied to feature branch</li> </ul>"},{"location":"CLI-REFERENCE/#arguments_5","title":"Arguments","text":"Argument Description <code>FEATURE_NAME</code> Name of the feature to review"},{"location":"CLI-REFERENCE/#options_7","title":"Options","text":"Option Description <code>--delete-history</code> When dropping, delete AI history instead of archiving <code>--reason TEXT</code> Reason for dropping (for audit trail) <code>--base-branch TEXT</code> Target branch for merge (default: main)"},{"location":"CLI-REFERENCE/#examples_9","title":"Examples","text":"<pre><code># Interactive review\nweft feature review user-authentication\n\n# Review with custom base branch\nweft feature review user-authentication --base-branch develop\n</code></pre>"},{"location":"CLI-REFERENCE/#exit-codes_6","title":"Exit Codes","text":"<ul> <li><code>0</code> - Review completed successfully</li> <li><code>1</code> - Feature not found or review cancelled</li> </ul>"},{"location":"CLI-REFERENCE/#weft-feature-drop","title":"<code>weft feature drop</code>","text":"<p>Drop/abandon a feature without merging.</p>"},{"location":"CLI-REFERENCE/#synopsis_11","title":"Synopsis","text":"<pre><code>weft feature drop FEATURE_NAME [OPTIONS]\n</code></pre>"},{"location":"CLI-REFERENCE/#description_10","title":"Description","text":"<p>Drops a feature and:</p> <ul> <li>Removes the worktree and branch</li> <li>Marks AI history as \"DROPPED\" (preserved by default for audit)</li> <li>Updates feature state</li> <li>Optionally deletes AI history permanently</li> </ul> <p>By default, AI history is preserved for audit compliance. Use <code>--delete-history</code> to permanently remove it.</p>"},{"location":"CLI-REFERENCE/#arguments_6","title":"Arguments","text":"Argument Description <code>FEATURE_NAME</code> Name of the feature to drop"},{"location":"CLI-REFERENCE/#options_8","title":"Options","text":"Option Short Type Description <code>--delete-history</code> Flag Permanently delete AI history (default: preserve for audit) <code>--reason</code> <code>-r</code> String Reason for dropping (added to audit trail) <code>--force</code> <code>-f</code> Flag Skip confirmation prompt"},{"location":"CLI-REFERENCE/#examples_10","title":"Examples","text":"<pre><code># Drop a feature you created but never started\nweft feature drop my-feature\n\n# Drop and delete all AI history\nweft feature drop my-feature --delete-history\n\n# Drop with a reason (for audit trail)\nweft feature drop my-feature -r \"Requirements changed\"\n\n# Skip confirmation (be careful!)\nweft feature drop my-feature --force\n\n# Combine options\nweft feature drop my-feature --delete-history -r \"Test cleanup\" -f\n</code></pre>"},{"location":"CLI-REFERENCE/#exit-codes_7","title":"Exit Codes","text":"<ul> <li><code>0</code> - Feature dropped successfully</li> <li><code>1</code> - Feature not found or drop failed</li> </ul>"},{"location":"CLI-REFERENCE/#environment-variables_1","title":"Environment Variables","text":"<p>Weft respects these environment variables:</p> Variable Description Example <code>ANTHROPIC_API_KEY</code> Claude API key (required for AI) <code>sk-ant-api03-...</code> <code>WEFT_ANTHROPIC_API_KEY</code> Alternative name for API key <code>sk-ant-api03-...</code> <code>AI_BACKEND</code> Override AI backend <code>anthropic</code>, <code>local</code> <code>CLAUDE_MODEL</code> Override Claude model <code>claude-3-5-sonnet-20241022</code> <code>POLL_INTERVAL</code> Watcher poll interval (seconds) <code>2</code> <code>CODE_REPO_PATH</code> Override code repository path <code>/path/to/repo</code> <code>AI_HISTORY_PATH</code> Override AI history path <code>/path/to/history</code>"},{"location":"CLI-REFERENCE/#exit-codes_8","title":"Exit Codes","text":"<p>All Weft commands follow standard exit code conventions:</p> Code Meaning <code>0</code> Success <code>1</code> General error <code>2</code> Misuse (invalid arguments)"},{"location":"CLI-REFERENCE/#shell-completion","title":"Shell Completion","text":"<p>Weft supports shell completion for Bash, Zsh, and Fish.</p>"},{"location":"CLI-REFERENCE/#bash","title":"Bash","text":"<pre><code># Add to ~/.bashrc\neval \"$(_WEFT_COMPLETE=bash_source weft)\"\n</code></pre>"},{"location":"CLI-REFERENCE/#zsh","title":"Zsh","text":"<pre><code># Add to ~/.zshrc\neval \"$(_WEFT_COMPLETE=zsh_source weft)\"\n</code></pre>"},{"location":"CLI-REFERENCE/#fish","title":"Fish","text":"<pre><code># Add to ~/.config/fish/completions/weft.fish\neval (env _WEFT_COMPLETE=fish_source weft)\n</code></pre>"},{"location":"CLI-REFERENCE/#configuration-files","title":"Configuration Files","text":"<p>Weft looks for configuration in this order:</p> <ol> <li>Command-line <code>--config</code> option</li> <li><code>.env</code> in current directory</li> <li><code>~/.weft.env</code> in home directory</li> <li>Environment variables</li> </ol>"},{"location":"CLI-REFERENCE/#see-also_2","title":"See Also","text":"<ul> <li>Installation Guide</li> <li>Configuration Reference</li> <li>Agent System</li> <li>Troubleshooting</li> </ul>"},{"location":"CONFIGURATION/","title":"Configuration Reference","text":"<p>Complete guide to configuring Weft via <code>.weftrc.yaml</code> and environment variables.</p>"},{"location":"CONFIGURATION/#configuration-file-weftrcyaml","title":"Configuration File: <code>.weftrc.yaml</code>","text":"<p>The <code>.weftrc.yaml</code> file is created by <code>weft init</code> and lives in your project root.</p>"},{"location":"CONFIGURATION/#example-configuration","title":"Example Configuration","text":"<pre><code>project:\n  name: my-app\n  type: fullstack\n\nai:\n  provider: anthropic\n  model: claude-3-5-sonnet-20241022\n  model_profile: standard\n  history_path: ../weft-ai-history\n\nagents:\n  enabled:\n    - meta\n    - architect\n  disabled: []\n\ngit:\n  worktree:\n    base_branch: main\n    prefix: feat/\n  ignore_patterns: []\n\npaths:\n  root: .weft\n  features: .weft/features\n  tasks: .weft/tasks\n  history: .weft/history\n</code></pre>"},{"location":"CONFIGURATION/#configuration-sections","title":"Configuration Sections","text":""},{"location":"CONFIGURATION/#project","title":"<code>project</code>","text":"Field Type Required Description <code>name</code> string Yes Project name <code>type</code> enum Yes <code>backend</code>, <code>frontend</code>, or <code>fullstack</code>"},{"location":"CONFIGURATION/#ai","title":"<code>ai</code>","text":"Field Type Default Description <code>provider</code> enum <code>anthropic</code> <code>anthropic</code>, <code>openai</code>, or <code>local</code> <code>model</code> string <code>claude-3-5-sonnet-20241022</code> Specific model to use <code>model_profile</code> enum <code>standard</code> <code>fast</code>, <code>standard</code>, or <code>quality</code> <code>history_path</code> string <code>../weft-ai-history</code> Path to AI history repo"},{"location":"CONFIGURATION/#agents","title":"<code>agents</code>","text":"Field Type Default Description <code>enabled</code> array <code>[\"meta\", \"architect\"]</code> Enabled agents <code>disabled</code> array <code>[]</code> Disabled agents <p>Valid agents: <code>meta</code>, <code>architect</code>, <code>openapi</code>, <code>ui</code>, <code>integration</code>, <code>test</code></p>"},{"location":"CONFIGURATION/#git","title":"<code>git</code>","text":"Field Type Default Description <code>worktree.base_branch</code> string <code>main</code> Branch to branch from <code>worktree.prefix</code> string <code>feat/</code> Feature branch prefix <code>ignore_patterns</code> array <code>[]</code> Git ignore patterns"},{"location":"CONFIGURATION/#environment-variables","title":"Environment Variables","text":""},{"location":"CONFIGURATION/#required","title":"Required","text":"Variable Description <code>ANTHROPIC_API_KEY</code> Claude API key from console.anthropic.com <code>WEFT_ANTHROPIC_API_KEY</code> Alternative name for API key"},{"location":"CONFIGURATION/#optional","title":"Optional","text":"Variable Default Description <code>AI_BACKEND</code> From config Override provider <code>CLAUDE_MODEL</code> From config Override model <code>POLL_INTERVAL</code> <code>2</code> Watcher poll interval (seconds) <code>CODE_REPO_PATH</code> Project root Code repository path <code>AI_HISTORY_PATH</code> From config AI history path"},{"location":"CONFIGURATION/#setting-variables","title":"Setting Variables","text":"<pre><code># Shell (temporary)\nexport ANTHROPIC_API_KEY=sk-ant-api03-your-key\n\n# .env file (persistent)\necho \"ANTHROPIC_API_KEY=sk-ant-api03-your-key\" &gt; .env\n\n# Shell profile (permanent)\necho 'export ANTHROPIC_API_KEY=sk-ant-api03-your-key' &gt;&gt; ~/.bashrc\n</code></pre>"},{"location":"CONFIGURATION/#security-best-practices","title":"Security Best Practices","text":"<ol> <li>Never commit secrets to <code>.weftrc.yaml</code> or git</li> <li>Use environment variables for all API keys</li> <li>Add <code>.env</code> to <code>.gitignore</code></li> <li>Rotate keys regularly</li> <li>Use separate keys for dev/prod</li> </ol>"},{"location":"CONFIGURATION/#customizing-agent-prompts","title":"Customizing Agent Prompts","text":"<p>Prompt specifications are in <code>.weft/prompts/v{version}/</code>:</p> <pre><code>.weft/prompts/v1.0.0/\n\u251c\u2500\u2500 00_meta.md\n\u251c\u2500\u2500 01_architect.md\n\u251c\u2500\u2500 02-openapi.md\n\u251c\u2500\u2500 03-ui.md\n\u251c\u2500\u2500 04-integration.md\n\u2514\u2500\u2500 05-test.md\n</code></pre> <p>To customize:</p> <pre><code># Edit prompt spec\nvim .weft/prompts/v1.0.0/00_meta.md\n\n# Restart runtime to apply\nweft down &amp;&amp; weft up\n</code></pre>"},{"location":"CONFIGURATION/#see-also","title":"See Also","text":"<ul> <li>Installation Guide - Initial setup and installation</li> <li>CLI Reference - All CLI commands</li> <li>Agents Documentation - Agent specifications and workflow</li> <li>Troubleshooting - Common issues</li> </ul>"},{"location":"DEVELOPMENT/","title":"Contributing to Weft","text":"<p>Thank you for your interest in contributing to Weft! This guide will help you set up your development environment and understand our development workflow.</p> <p>For detailed contribution guidelines, code of conduct, and community standards, see CONTRIBUTING.md.</p>"},{"location":"DEVELOPMENT/#getting-started","title":"Getting Started","text":""},{"location":"DEVELOPMENT/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.11 or higher</li> <li>Docker and Docker Compose</li> <li>Git</li> <li>Code editor (VS Code, PyCharm, etc.)</li> </ul>"},{"location":"DEVELOPMENT/#development-setup","title":"Development Setup","text":"<pre><code># Clone repository\ngit clone https://github.com/weftlabs/weft-cli.git\ncd weft-cli\n\n# Create virtual environment\npython3 -m venv venv\nsource venv/bin/activate  # Windows: venv\\Scripts\\activate\n\n# Install development dependencies\npip install -e \".[dev]\"\n\n# Verify installation\nweft --version\npytest\n</code></pre>"},{"location":"DEVELOPMENT/#dependency-management","title":"Dependency Management","text":"<p>Weft uses <code>pyproject.toml</code> as the single source of truth for dependencies.</p> <p>For development: <pre><code># Install with development dependencies\npip install -e \".[dev]\"\n</code></pre></p> <p>For production (reproducible builds): <pre><code># Install exact tested versions\npip install -r requirements-lock.txt\n</code></pre></p> <p>Updating dependencies:</p> <ol> <li>Modify <code>pyproject.toml</code> dependencies</li> <li>Install pip-tools: <code>pip install pip-tools</code></li> <li>Regenerate lockfile: <code>pip-compile pyproject.toml -o requirements-lock.txt</code></li> <li>Test thoroughly: <code>pytest tests/</code></li> <li>Commit both <code>pyproject.toml</code> and <code>requirements-lock.txt</code></li> </ol>"},{"location":"DEVELOPMENT/#project-structure","title":"Project Structure","text":"<pre><code>weft/\n\u251c\u2500\u2500 src/weft/               # Main package\n\u2502   \u251c\u2500\u2500 agents/            # Agent implementations\n\u2502   \u251c\u2500\u2500 cli/               # CLI commands\n\u2502   \u251c\u2500\u2500 config/            # Configuration management\n\u2502   \u251c\u2500\u2500 git/               # Git operations\n\u2502   \u251c\u2500\u2500 history/           # AI history tracking\n\u2502   \u251c\u2500\u2500 queue/             # Task queue system\n\u2502   \u251c\u2500\u2500 templates/         # Docker &amp; config templates\n\u2502   \u2514\u2500\u2500 utils/             # Utilities\n\u251c\u2500\u2500 prompt-specs/          # Agent prompt specifications\n\u2502   \u2514\u2500\u2500 v1.0.0/           # Versioned prompts\n\u251c\u2500\u2500 tests/                 # Test suite\n\u2502   \u251c\u2500\u2500 unit/             # Unit tests (mirror src structure)\n\u2502   \u2514\u2500\u2500 integration/      # Integration tests\n\u251c\u2500\u2500 docs/                  # Documentation\n\u251c\u2500\u2500 templates/             # CLI templates\n\u251c\u2500\u2500 pyproject.toml        # Package configuration\n\u2514\u2500\u2500 README.md             # Project overview\n</code></pre>"},{"location":"DEVELOPMENT/#code-style","title":"Code Style","text":""},{"location":"DEVELOPMENT/#python-style-guide","title":"Python Style Guide","text":"<p>Mandatory:</p> <ul> <li>Follow PEP 8</li> <li>Use type hints</li> <li>Keep functions short (&lt;50 lines)</li> <li>Use descriptive names</li> </ul> <p>Docstrings:</p> <ul> <li>Module-level: 1 sentence describing purpose</li> <li>Public functions: 1-2 lines max, only if intent not obvious</li> <li>NO Args/Returns/Raises sections</li> <li>NO examples in docstrings (use tests)</li> </ul> <p>Example:</p> <pre><code>\"\"\"Configuration management for Weft projects.\"\"\"\n\nfrom pathlib import Path\nfrom typing import Optional\n\ndef load_weftrc(path: Optional[Path] = None) -&gt; Optional[WeftRC]:\n    \"\"\"Load and validate .weftrc.yaml file.\"\"\"\n    if path is None:\n        path = find_project_root() / \".weftrc.yaml\"\n\n    if not path.exists():\n        return None\n\n    return WeftRC.parse_file(path)\n</code></pre>"},{"location":"DEVELOPMENT/#linting","title":"Linting","text":"<pre><code># Format code\nblack src/ tests/\n\n# Lint\nruff check src/ tests/\n\n# Type check\nmypy src/\n\n# Run all checks\nblack src/ tests/ &amp;&amp; ruff check src/ tests/ &amp;&amp; mypy src/\n</code></pre>"},{"location":"DEVELOPMENT/#testing","title":"Testing","text":""},{"location":"DEVELOPMENT/#test-structure","title":"Test Structure","text":"<p>Tests MUST mirror source structure:</p> <pre><code>src/weft/config/settings.py  \u2192  tests/unit/weft/config/test_settings.py\nsrc/weft/agents/meta.py      \u2192  tests/unit/weft/agents/test_meta.py\n</code></pre>"},{"location":"DEVELOPMENT/#writing-tests","title":"Writing Tests","text":"<pre><code>import pytest\nfrom weft.config.project import load_weftrc\n\ndef test_load_weftrc_valid_file(tmp_path):\n    \"\"\"Test loading valid weftrc file.\"\"\"\n    config_file = tmp_path / \".weftrc.yaml\"\n    config_file.write_text(\"\"\"\nproject:\n  name: test\n  type: backend\n\"\"\")\n\n    result = load_weftrc(tmp_path)\n\n    assert result is not None\n    assert result.project.name == \"test\"\n    assert result.project.type == \"backend\"\n\ndef test_load_weftrc_missing_file(tmp_path):\n    \"\"\"Test loading non-existent file returns None.\"\"\"\n    result = load_weftrc(tmp_path)\n    assert result is None\n</code></pre>"},{"location":"DEVELOPMENT/#running-tests","title":"Running Tests","text":"<pre><code># All tests\npytest\n\n# With coverage\npytest --cov=weft --cov-report=html\n\n# Specific file\npytest tests/unit/weft/config/test_settings.py\n\n# Specific test\npytest tests/unit/weft/config/test_settings.py::test_load_weftrc_valid_file\n\n# Watch mode (install pytest-watch)\nptw\n</code></pre>"},{"location":"DEVELOPMENT/#coverage-requirements","title":"Coverage Requirements","text":"<ul> <li>Minimum: 90% coverage for all PRs</li> <li>Target: 95%+ coverage</li> <li>Exceptions: May be granted for edge cases</li> </ul>"},{"location":"DEVELOPMENT/#development-workflow","title":"Development Workflow","text":""},{"location":"DEVELOPMENT/#1-choose-a-feature","title":"1. Choose a Feature","text":"<p>Check existing issues for current priorities and planned features.</p> <pre><code># Check existing issues\ngh issue list\n</code></pre>"},{"location":"DEVELOPMENT/#2-create-feature-branch","title":"2. Create Feature Branch","text":"<pre><code># Create feature branch\ngit checkout -b feat/feature-name\n\n# Or bugfix branch\ngit checkout -b fix/issue-description\n</code></pre>"},{"location":"DEVELOPMENT/#3-implement","title":"3. Implement","text":"<ul> <li>Write tests first (TDD) or alongside code</li> <li>Keep commits focused and logical</li> <li>Write clear commit messages</li> <li>Follow PEP 8 and type hints</li> <li>Update documentation for behavior changes</li> </ul>"},{"location":"DEVELOPMENT/#4-test","title":"4. Test","text":"<pre><code># Run tests\npytest\n\n# Check coverage\npytest --cov=weft\n\n# Lint\nblack src/ tests/\nruff check src/ tests/\nmypy src/\n</code></pre>"},{"location":"DEVELOPMENT/#5-document","title":"5. Document","text":"<ul> <li>Update relevant docs in <code>docs/</code></li> <li>Add docstrings if needed</li> <li>Update CHANGELOG.md</li> </ul>"},{"location":"DEVELOPMENT/#6-submit-pr","title":"6. Submit PR","text":"<pre><code># Push branch\ngit push origin feat/story-1-1-project-init\n\n# Create PR on GitHub\n# - Reference story number\n# - Describe changes\n# - Include test results\n# - Tag reviewers\n</code></pre>"},{"location":"DEVELOPMENT/#commit-messages","title":"Commit Messages","text":"<p>Format: <code>type(scope): subject</code></p> <p>Types:</p> <ul> <li><code>feat</code> - New feature</li> <li><code>fix</code> - Bug fix</li> <li><code>docs</code> - Documentation</li> <li><code>test</code> - Tests</li> <li><code>refactor</code> - Code refactoring</li> <li><code>chore</code> - Maintenance</li> </ul> <p>Examples:</p> <pre><code>feat(cli): add weft init command\nfix(config): handle missing .weftrc.yaml gracefully\ndocs(guide): update getting started tutorial\ntest(agents): add meta agent integration tests\n</code></pre>"},{"location":"DEVELOPMENT/#building-and-running","title":"Building and Running","text":""},{"location":"DEVELOPMENT/#local-development","title":"Local Development","text":"<pre><code># Install in editable mode\npip install -e .\n\n# Run from source\npython -m weft.cli.main --version\n\n# Or use installed command\nweft --version\n</code></pre>"},{"location":"DEVELOPMENT/#docker-development","title":"Docker Development","text":"<pre><code># Build image\ndocker build -t weft:dev -f Dockerfile.watcher .\n\n# Run container\ndocker run --rm \\\n  -e ANTHROPIC_API_KEY=$ANTHROPIC_API_KEY \\\n  -v $(pwd):/app \\\n  weft:dev\n\n# Use docker-compose\ndocker-compose up --build\n</code></pre>"},{"location":"DEVELOPMENT/#debugging","title":"Debugging","text":""},{"location":"DEVELOPMENT/#vs-code-launch-configuration","title":"VS Code Launch Configuration","text":"<p><code>.vscode/launch.json</code>:</p> <pre><code>{\n  \"version\": \"0.2.0\",\n  \"configurations\": [\n    {\n      \"name\": \"Weft CLI\",\n      \"type\": \"python\",\n      \"request\": \"launch\",\n      \"module\": \"weft.cli.main\",\n      \"args\": [\"--verbose\", \"init\"],\n      \"console\": \"integratedTerminal\"\n    },\n    {\n      \"name\": \"Pytest\",\n      \"type\": \"python\",\n      \"request\": \"launch\",\n      \"module\": \"pytest\",\n      \"args\": [\"-v\", \"tests/\"],\n      \"console\": \"integratedTerminal\"\n    }\n  ]\n}\n</code></pre>"},{"location":"DEVELOPMENT/#debugging-agents","title":"Debugging Agents","text":"<pre><code># Run agent directly\npython -m weft.agents.meta_agent feature-name --debug\n\n# With debugger\npython -m pdb -m weft.agents.meta_agent feature-name\n</code></pre>"},{"location":"DEVELOPMENT/#release-process","title":"Release Process","text":""},{"location":"DEVELOPMENT/#version-numbering","title":"Version Numbering","text":"<p>Follow Semantic Versioning (semver):</p> <ul> <li>MAJOR: Breaking changes</li> <li>MINOR: New features (backward compatible)</li> <li>PATCH: Bug fixes</li> </ul>"},{"location":"DEVELOPMENT/#creating-a-release","title":"Creating a Release","text":"<pre><code># Update version in pyproject.toml\nvim pyproject.toml\n\n# Update CHANGELOG.md\nvim CHANGELOG.md\n\n# Commit\ngit add pyproject.toml CHANGELOG.md\ngit commit -m \"chore: bump version to 0.2.0\"\n\n# Tag\ngit tag -a v0.2.0 -m \"Release v0.2.0\"\n\n# Push\ngit push origin main --tags\n\n# Build and publish (maintainers only)\npython -m build\ntwine upload dist/*\n</code></pre>"},{"location":"DEVELOPMENT/#contributing-guidelines","title":"Contributing Guidelines","text":""},{"location":"DEVELOPMENT/#pull-request-checklist","title":"Pull Request Checklist","text":"<ul> <li> Tests pass (<code>pytest</code>)</li> <li> Coverage \u2265 90% (<code>pytest --cov</code>)</li> <li> Code formatted (<code>black</code>)</li> <li> Linting passes (<code>ruff</code>, <code>mypy</code>)</li> <li> Documentation updated</li> <li> CHANGELOG.md updated</li> <li> Commit messages follow format</li> <li> Branch up to date with main</li> </ul>"},{"location":"DEVELOPMENT/#code-review-process","title":"Code Review Process","text":"<ol> <li>Submit PR</li> <li>Automated checks run (CI)</li> <li>Maintainer reviews code</li> <li>Address feedback</li> <li>Maintainer approves and merges</li> </ol>"},{"location":"DEVELOPMENT/#getting-help","title":"Getting Help","text":"<ul> <li>Questions: GitHub Discussions</li> <li>Bugs: GitHub Issues</li> <li>PRs: GitHub Pull Requests</li> <li>Chat: (Coming soon)</li> </ul>"},{"location":"DEVELOPMENT/#resources","title":"Resources","text":"<ul> <li>Architecture: ARCHITECTURE.md</li> <li>CLI Reference: CLI-REFERENCE.md</li> <li>Installation: INSTALLATION.md</li> </ul>"},{"location":"DEVELOPMENT/#community","title":"Community","text":"<ul> <li>Be respectful and inclusive</li> <li>Help others learn</li> <li>Share knowledge</li> <li>Provide constructive feedback</li> <li>Celebrate successes</li> </ul> <p>Thank you for contributing to Weft!</p>"},{"location":"DOCS-README/","title":"Weft Documentation","text":"<p>Welcome to the Weft documentation. Start here to understand and use the system.</p>"},{"location":"DOCS-README/#documentation-status","title":"Documentation Status","text":"<p>Last Updated: 2025-12-21 Status: Core documentation complete, additional docs in progress</p> <p>The documentation has been reworked to accurately reflect the current implementation (v0.1.0). It clearly separates what's implemented now from what's planned for future releases.</p>"},{"location":"DOCS-README/#getting-started","title":"Getting Started","text":"<p>New to Weft? Start with these guides:</p> <ol> <li>Installation - Install Weft and set up your environment</li> <li>CLI Reference - Complete command documentation</li> <li>Agents - Understanding the agent system</li> </ol>"},{"location":"DOCS-README/#core-documentation","title":"Core Documentation","text":""},{"location":"DOCS-README/#user-guides","title":"User Guides","text":"<ul> <li>Installation - Install Weft using Homebrew, pipx, or curl</li> <li>CLI Reference - Complete command reference with examples</li> <li>Configuration - <code>.weftrc.yaml</code> and environment variables</li> <li>Agents - Understanding the agent system</li> <li>Troubleshooting - Common issues and solutions</li> </ul>"},{"location":"DOCS-README/#development","title":"Development","text":"<ul> <li>Architecture - Technical architecture and design decisions</li> <li>Development - Contributing and development guide</li> </ul>"},{"location":"DOCS-README/#quick-links","title":"Quick Links","text":"<ul> <li>Installation: See Installation Guide</li> <li>Commands: See CLI Reference</li> <li>Configuration: See Configuration Reference</li> </ul>"},{"location":"DOCS-README/#documentation-principles","title":"Documentation Principles","text":"<p>This documentation follows these principles:</p> <ol> <li>Honest and Current - Describes what exists now, not aspirational features</li> <li>Practical First - How-to guides before theory</li> <li>Progressive Disclosure - Start simple, reveal complexity as needed</li> <li>Separation of Concerns - Clear distinction between \"implemented\" vs \"planned\"</li> <li>Accuracy Over Marketing - No hype, just facts</li> </ol>"},{"location":"DOCS-README/#whats-implemented-vs-planned","title":"What's Implemented vs. Planned","text":""},{"location":"DOCS-README/#currently-working-v010","title":"\u2705 Currently Working (v0.1.0)","text":"<ul> <li>Project initialization (<code>weft init</code>)</li> <li>Docker runtime management (<code>weft up</code>, <code>weft down</code>, <code>weft logs</code>)</li> <li>Feature lifecycle (<code>weft feature create/start/list/status/accept/drop</code>)</li> <li>Agent prompt specifications (Meta and Architect)</li> <li>Claude API integration</li> <li>Basic configuration system (<code>.weftrc.yaml</code>)</li> </ul>"},{"location":"DOCS-README/#in-progress","title":"\ud83d\udea7 In Progress","text":"<ul> <li>End-to-end agent pipeline</li> <li>Complete watcher reliability</li> <li>Git worktree automation</li> <li>Additional agent implementations</li> </ul>"},{"location":"DOCS-README/#planned","title":"\ud83d\udccb Planned","text":"<ul> <li>OpenAPI, UI, Integration, Test agents</li> <li>Observability with OpenTelemetry</li> <li>Local LLM support (offline mode)</li> <li>Enhanced security scanning</li> <li>Self-development capabilities</li> </ul>"},{"location":"DOCS-README/#getting-help","title":"Getting Help","text":"<ul> <li>Issues: GitHub Issues</li> <li>Discussions: GitHub Discussions</li> <li>Documentation: You're reading it!</li> </ul>"},{"location":"DOCS-README/#contributing-to-documentation","title":"Contributing to Documentation","text":"<p>Found an error? Want to improve clarity? Contributions welcome!</p> <ol> <li>Documentation source is in <code>docs/</code></li> <li>Use clear, simple language</li> <li>Provide examples</li> <li>Test all commands before documenting</li> <li>Keep \"current\" vs \"planned\" distinction clear</li> </ol> <p>Note: If you're looking for the old whitepaper-style documentation, it's been retired as it described aspirational features not yet implemented. The new documentation accurately reflects the current state of the project.</p>"},{"location":"INSTALLATION/","title":"Installation Guide","text":"<p>Weft CLI can be installed using multiple methods depending on your preferences and environment.</p>"},{"location":"INSTALLATION/#prerequisites","title":"Prerequisites","text":"<p>All installation methods require: - Python 3.11 or higher - Docker and Docker Compose (for running agents) - Claude API key from console.anthropic.com (unless using local LLM)</p>"},{"location":"INSTALLATION/#installation-methods","title":"Installation Methods","text":""},{"location":"INSTALLATION/#method-1-homebrew-recommended-for-macoslinux","title":"Method 1: Homebrew (Recommended for macOS/Linux)","text":"<p>Best for regular users who want easy installation and automatic updates.</p> <pre><code># Add the Weft tap\nbrew tap weftlabs/tap\n\n# Install weft\nbrew install weft\n\n# Verify installation\nweft --version\n</code></pre> <p>Advantages: - Easiest installation and updates - Automatic dependency management - Trusted by enterprise environments - Simple rollback: <code>brew uninstall weft</code></p> <p>Update to latest version: <pre><code>brew upgrade weft\n</code></pre></p>"},{"location":"INSTALLATION/#method-2-pipx-recommended-for-python-developers","title":"Method 2: pipx (Recommended for Python Developers)","text":"<p>Best for Python developers who want isolated environments and virtual environment management.</p> <pre><code># Install pipx if you don't have it\npython3 -m pip install --user pipx\npython3 -m pipx ensurepath\n\n# Install weft\npipx install git+https://github.com/weftlabs/weft-cli.git\n\n# Or install from PyPI (once published)\n# pipx install weft\n\n# Verify installation\nweft --version\n</code></pre> <p>Advantages: - Isolated virtual environment (no conflicts) - Standard Python packaging - Easy to upgrade or uninstall - Works on all platforms</p> <p>Update to latest version: <pre><code>pipx upgrade weft\n</code></pre></p> <p>Uninstall: <pre><code>pipx uninstall weft\n</code></pre></p>"},{"location":"INSTALLATION/#method-3-quick-install-script","title":"Method 3: Quick Install Script","text":"<p>Best for CI/CD pipelines, quick testing, or when you don't have Homebrew/pipx.</p> <pre><code># Download and run the install script\ncurl -fsSL https://raw.githubusercontent.com/weftlabs/weft-cli/main/install.sh | sh\n\n# Or using wget\nwget -qO- https://raw.githubusercontent.com/weftlabs/weft-cli/main/install.sh | sh\n</code></pre> <p>The script will: 1. Check Python 3.11+ is installed 2. Check Docker is available (warns if not) 3. Install Weft using pip to <code>~/.local/bin</code> 4. Verify the installation</p> <p>Advantages: - One-line installation - Works in cloud VMs and CI environments - No prior tool installation needed - Automatic prerequisite checking</p> <p>Note: This method uses <code>pip install --user</code>, which installs to your user directory. You may need to add <code>~/.local/bin</code> to your PATH:</p> <pre><code># Add to ~/.bashrc or ~/.zshrc\nexport PATH=\"$HOME/.local/bin:$PATH\"\n</code></pre>"},{"location":"INSTALLATION/#method-4-from-source-for-development","title":"Method 4: From Source (For Development)","text":"<p>Best for contributors or developers who want to modify Weft.</p> <pre><code># Clone the repository\ngit clone https://github.com/weftlabs/weft-cli.git\ncd weft-cli\n\n# Install in development mode\npip install -e .\n\n# Or with development dependencies\npip install -e \".[dev]\"\n\n# Verify installation\nweft --version\n</code></pre> <p>Advantages: - Live updates as you edit code - Includes development tools (pytest, ruff, mypy) - Full access to source code</p> <p>See DEVELOPMENT.md for complete development setup.</p>"},{"location":"INSTALLATION/#post-installation-setup","title":"Post-Installation Setup","text":""},{"location":"INSTALLATION/#1-configure-claude-api-key","title":"1. Configure Claude API Key","text":"<pre><code># Set environment variable\nexport ANTHROPIC_API_KEY=sk-ant-api03-your-key-here\n\n# Or create a .env file in your project\necho \"ANTHROPIC_API_KEY=sk-ant-api03-your-key-here\" &gt; .env\n</code></pre> <p>Security Note: Never commit <code>.env</code> files to version control.</p>"},{"location":"INSTALLATION/#2-verify-docker-installation","title":"2. Verify Docker Installation","text":"<pre><code># Check Docker is running\ndocker --version\ndocker compose version\n\n# Test Docker access\ndocker ps\n</code></pre> <p>If Docker is not installed:</p> <ul> <li>macOS: Docker Desktop for Mac</li> <li>Linux: Docker Engine</li> <li>Windows: Docker Desktop for Windows</li> </ul>"},{"location":"INSTALLATION/#3-initialize-your-first-project","title":"3. Initialize Your First Project","text":"<pre><code># Navigate to your project\ncd ~/projects/my-app\n\n# Initialize Weft\nweft init\n\n# Follow the interactive prompts\n# This creates:\n#  - .weftrc.yaml (project configuration)\n#  - .weft/ directory (runtime files, prompts, docker-compose.yml)\n</code></pre>"},{"location":"INSTALLATION/#4-start-the-runtime","title":"4. Start the Runtime","text":"<pre><code># Start agent watchers\nweft up\n\n# Verify agents are running\nweft status\n\n# View logs\nweft logs meta --follow\n</code></pre>"},{"location":"INSTALLATION/#next-steps","title":"Next Steps","text":"<ul> <li>Review CLI Reference for all commands</li> <li>See Configuration Guide for configuration options</li> <li>Learn about Agents and how they work</li> <li>Join discussions at GitHub Discussions</li> </ul>"},{"location":"INSTALLATION/#getting-help","title":"Getting Help","text":"<p>If you encounter issues:</p> <ol> <li>Check TROUBLESHOOTING.md</li> <li>Search existing issues</li> <li>Open a new issue with:<ul> <li>Installation method used</li> <li>Operating system and version</li> <li>Python version (<code>python3 --version</code>)</li> <li>Complete error messages</li> </ul> </li> </ol>"},{"location":"REDUNDANCY-REVIEW/","title":"Documentation Redundancy Review","text":""},{"location":"REDUNDANCY-REVIEW/#executive-summary","title":"Executive Summary","text":"<p>The documentation contains significant redundancy across multiple files, particularly: - What is Weft appears in 3 places (index.md, OVERVIEW.md, AGENTS.md) - Agent specifications duplicated across 3 files (index.md, OVERVIEW.md, AGENTS.md) - Installation instructions in 2 places (index.md, INSTALLATION.md) - Workflow/usage in 3 places (index.md, OVERVIEW.md, CLI-REFERENCE.md) - Configuration in 2 places (OVERVIEW.md, CONFIGURATION.md) - Philosophy in 2 places (index.md, OVERVIEW.md) - Architecture in 3 places (index.md, OVERVIEW.md, ARCHITECTURE.md)</p> <p>Additionally, the navigation structure has too many sections and includes internal/contributor documentation in the main menu.</p>"},{"location":"REDUNDANCY-REVIEW/#detailed-redundancy-analysis","title":"Detailed Redundancy Analysis","text":""},{"location":"REDUNDANCY-REVIEW/#1-what-is-weft-3-instances","title":"1. \"What is Weft\" (3 instances)","text":"<p>index.md: <pre><code>## What is Weft?\nWeft is a CLI tool that orchestrates **6 specialized AI agents** through a structured workflow...\n- \u2705 Structured Workflow\n- \u2705 Full Auditability\n- \u2705 Human-in-the-Loop\n- \u2705 Security First\n- \u2705 Production Ready\n</code></pre></p> <p>OVERVIEW.md: <pre><code>## What is Weft?\nWeft is a command-line tool that helps developers use AI to design and plan software features...\n</code></pre></p> <p>AGENTS.md: <pre><code>## Overview\nWeft uses **role-based AI agents** - each agent has a narrow, well-defined responsibility...\n</code></pre></p> <p>Recommendation: Keep only in index.md. Remove from OVERVIEW.md and AGENTS.md.</p>"},{"location":"REDUNDANCY-REVIEW/#2-agent-pipelinespecifications-3-instances","title":"2. Agent Pipeline/Specifications (3 instances)","text":"<p>index.md: - Mermaid diagram showing agent flow - Agent table with all 6 agents and their outputs</p> <p>OVERVIEW.md: - ASCII art diagram - Agent table with all 6 agents</p> <p>AGENTS.md: - ASCII art pipeline - Full specifications for all 6 agents</p> <p>Recommendation: - index.md: Remove detailed agent table, keep simple Mermaid diagram with link to AGENTS.md - OVERVIEW.md: Remove entirely or repurpose as \"Quick Start Tutorial\" - AGENTS.md: Keep as the ONLY place with full agent specifications</p>"},{"location":"REDUNDANCY-REVIEW/#3-installation-instructions-2-instances","title":"3. Installation Instructions (2 instances)","text":"<p>index.md: - Quick Start section with tabbed installation (Homebrew, pipx, curl, From Source) - Then shows <code>weft init</code>, <code>weft up</code>, <code>weft feature create</code> example</p> <p>INSTALLATION.md: - Prerequisites - Detailed installation for all 4 methods - Post-installation setup (4 steps) - Next steps and troubleshooting</p> <p>Recommendation: - index.md: Keep ONLY the tabbed code blocks (minimal) - INSTALLATION.md: Keep as the comprehensive installation guide - Remove prose/explanation from index.md, just show the commands</p>"},{"location":"REDUNDANCY-REVIEW/#4-workflowusage-3-instances","title":"4. Workflow/Usage (3 instances)","text":"<p>index.md: <pre><code># Example Workflow\nweft feature create user-dashboard\n# Agents run automatically...\nweft feature review user-dashboard\n</code></pre></p> <p>OVERVIEW.md: - 8-step detailed \"Workflow Steps\" section - Each step explains what happens internally</p> <p>CLI-REFERENCE.md: - Complete command reference with all options</p> <p>Recommendation: - index.md: Keep simple example only - OVERVIEW.md: Remove (covered by CLI-REFERENCE.md) - CLI-REFERENCE.md: The authoritative command documentation</p>"},{"location":"REDUNDANCY-REVIEW/#5-configuration-2-instances","title":"5. Configuration (2 instances)","text":"<p>OVERVIEW.md: <pre><code>project:\n  name: my-app\n  type: fullstack\n\nai:\n  provider: anthropic\n  ...\n</code></pre> Full configuration example with explanation.</p> <p>CONFIGURATION.md: - Complete configuration reference - All fields documented - Examples for every section</p> <p>Recommendation: - Remove configuration section from OVERVIEW.md entirely - CONFIGURATION.md is the single source of truth</p>"},{"location":"REDUNDANCY-REVIEW/#6-philosophyprinciples-2-instances","title":"6. Philosophy/Principles (2 instances)","text":"<p>index.md: <pre><code>## Philosophy\n1. **Human-in-the-Loop** - AI suggests, humans decide\n2. **Security First** - No secrets or sensitive data\n3. **Full Auditability** - Every AI interaction tracked\n4. **Reproducibility** - Same inputs yield same outputs\n5. **Practical Over Perfect** - Solve real problems incrementally\n</code></pre></p> <p>OVERVIEW.md: <pre><code>## Design Philosophy\n### 1. Simple Over Clever\n### 2. Observable Over Magic\n### 3. Secure by Default\n### 4. Human-First\n### 5. Incremental Progress\n</code></pre></p> <p>Nearly identical content, different wording.</p> <p>Recommendation: - Keep in index.md only (landing page philosophy) - Remove from OVERVIEW.md</p>"},{"location":"REDUNDANCY-REVIEW/#7-use-cases-2-instances","title":"7. Use Cases (2 instances)","text":"<p>index.md: - Solo Developers - Small Teams - Enterprise - Open Source</p> <p>OVERVIEW.md: - Good Use Cases (6 items) - Not Ideal For (5 items)</p> <p>Recommendation: - Consolidate into index.md - Remove from OVERVIEW.md</p>"},{"location":"REDUNDANCY-REVIEW/#8-architecture-diagrams-3-instances","title":"8. Architecture Diagrams (3 instances)","text":"<p>index.md: <pre><code>my-app-ai-history/FEAT-123/\n  01-architect/\n    in/           # Input prompts\n    out/          # AI outputs\n    log/          # Processing logs\n</code></pre></p> <p>OVERVIEW.md: - Full ASCII art with code repo, AI history, Docker runtime - 124 lines of detailed architecture</p> <p>ARCHITECTURE.md: - Complete technical architecture - System components - Design decisions</p> <p>Recommendation: - index.md: Keep minimal example - OVERVIEW.md: Remove architecture section - ARCHITECTURE.md: The authoritative architecture documentation</p>"},{"location":"REDUNDANCY-REVIEW/#9-file-based-queue-explanation-3-instances","title":"9. File-Based Queue Explanation (3 instances)","text":"<p>OVERVIEW.md: <pre><code>### File-Based Task Queue\nInstead of keeping agents running continuously...\n</code></pre></p> <p>AGENTS.md: <pre><code>### File-Based Queue\nAgents monitor their `in/` directory...\n</code></pre></p> <p>ARCHITECTURE.md: Likely has detailed technical explanation.</p> <p>Recommendation: - Brief mention in index.md - Full explanation only in ARCHITECTURE.md - Remove from OVERVIEW.md and AGENTS.md (or keep minimal reference with link)</p>"},{"location":"REDUNDANCY-REVIEW/#navigation-structure-issues","title":"Navigation Structure Issues","text":""},{"location":"REDUNDANCY-REVIEW/#current-navigation-mkdocsyml","title":"Current Navigation (mkdocs.yml)","text":"<pre><code>nav:\n  - Home: index.md\n  - Getting Started:\n    - Installation: INSTALLATION.md\n    - Overview: OVERVIEW.md              # \u2190 REDUNDANT with Home\n  - User Guide:\n    - CLI Reference: CLI-REFERENCE.md\n    - Configuration: CONFIGURATION.md\n    - Agents: AGENTS.md\n    - Troubleshooting: TROUBLESHOOTING.md\n  - Development:\n    - Architecture: ARCHITECTURE.md\n    - Development Guide: DEVELOPMENT.md\n    - Testing: TESTING-INSTALL.md        # \u2190 INTERNAL DOCS\n    - Release Process: RELEASE.md         # \u2190 INTERNAL DOCS\n    - Documentation Site: DOCUMENTATION-SITE.md  # \u2190 INTERNAL DOCS\n  - Community:\n    - Contributing: community/CONTRIBUTING.md\n    - Security: community/SECURITY.md\n    - Changelog: community/CHANGELOG.md\n    - License: community/LICENSE.md\n</code></pre>"},{"location":"REDUNDANCY-REVIEW/#issues","title":"Issues","text":"<ol> <li>OVERVIEW.md is redundant - Home page (index.md) should be the only overview</li> <li>Too many sections - 5 top-level sections for a CLI tool is excessive</li> <li>Internal docs in main nav - TESTING-INSTALL.md, RELEASE.md, DOCUMENTATION-SITE.md are contributor documentation</li> </ol>"},{"location":"REDUNDANCY-REVIEW/#proposed-reorganization","title":"Proposed Reorganization","text":""},{"location":"REDUNDANCY-REVIEW/#option-a-minimal-recommended","title":"Option A: Minimal (Recommended)","text":"<p>Remove OVERVIEW.md entirely and simplify navigation:</p> <pre><code>nav:\n  - Home: index.md\n  - User Guide:\n    - Installation: INSTALLATION.md\n    - CLI Reference: CLI-REFERENCE.md\n    - Configuration: CONFIGURATION.md\n    - Agents: AGENTS.md\n    - Troubleshooting: TROUBLESHOOTING.md\n  - Development:\n    - Architecture: ARCHITECTURE.md\n    - Contributing: DEVELOPMENT.md\n  - Community:\n    - Security: community/SECURITY.md\n    - Changelog: community/CHANGELOG.md\n    - License: community/LICENSE.md\n</code></pre> <p>Move to docs/internal/ (not in navigation): - TESTING-INSTALL.md - RELEASE.md - DOCUMENTATION-SITE.md - community/CONTRIBUTING.md (merge into DEVELOPMENT.md)</p> <p>Changes: - \"Getting Started\" section removed (just Installation in User Guide) - Internal docs moved out of main navigation - Contributing merged into Development Guide - 3 top-level sections instead of 5</p>"},{"location":"REDUNDANCY-REVIEW/#option-b-keep-quick-start","title":"Option B: Keep Quick Start","text":"<p>If you want to keep a \"Getting Started\" section, repurpose OVERVIEW.md as a true quick start tutorial:</p> <pre><code>nav:\n  - Home: index.md\n  - Getting Started:\n    - Quick Start: QUICKSTART.md         # \u2190 Renamed OVERVIEW.md\n    - Installation: INSTALLATION.md\n  - User Guide:\n    ...\n</code></pre> <p>QUICKSTART.md would be: - \"Your first 5 minutes with Weft\" - Prerequisites checklist - Step-by-step tutorial for one simple feature - Links to deeper documentation - No redundant content (no \"What is Weft\", no agent specs, etc.)</p>"},{"location":"REDUNDANCY-REVIEW/#specific-recommendations","title":"Specific Recommendations","text":""},{"location":"REDUNDANCY-REVIEW/#indexmd-home-page","title":"index.md (Home Page)","text":"<p>Keep: - What is Weft (1-2 paragraphs) - Key Features (grid cards) - Simple agent flow diagram (Mermaid) - Quick Start (tabbed installation commands only, no prose) - Philosophy (5 principles) - Use Cases (4 categories) - Minimal architecture example - Links to deeper docs</p> <p>Remove: - Detailed agent table (link to AGENTS.md instead) - Detailed workflow (link to CLI-REFERENCE.md) - Post-installation setup (that's in INSTALLATION.md) - Detailed architecture diagrams (link to ARCHITECTURE.md)</p> <p>Target length: ~200 lines (currently 242)</p>"},{"location":"REDUNDANCY-REVIEW/#overviewmd","title":"OVERVIEW.md","text":"<p>Option A: Delete entirely</p> <p>Option B: Repurpose as QUICKSTART.md - New content: \"Build your first feature in 5 minutes\" - Step-by-step tutorial with screenshots - No duplication of concepts from other pages - Focus on hands-on experience</p>"},{"location":"REDUNDANCY-REVIEW/#agentsmd","title":"AGENTS.md","text":"<p>Keep: - Agent specifications (all 6 agents with full details) - How agents work (watcher process) - Prompt specifications - Agent configuration - Best practices - Monitoring</p> <p>Remove: - \"What is Weft\" / \"Overview\" intro (just start with \"Agent Pipeline\") - Redundant file-based queue explanation (brief mention + link to ARCHITECTURE.md)</p> <p>Target length: ~400 lines (currently 456)</p>"},{"location":"REDUNDANCY-REVIEW/#installationmd","title":"INSTALLATION.md","text":"<p>Keep: - Prerequisites - All 4 installation methods (detailed) - Post-installation setup - Next steps - Getting help</p> <p>Already clean - no redundancy issues</p>"},{"location":"REDUNDANCY-REVIEW/#cli-referencemd","title":"CLI-REFERENCE.md","text":"<p>Keep as-is - comprehensive command reference with no redundancy</p>"},{"location":"REDUNDANCY-REVIEW/#configurationmd","title":"CONFIGURATION.md","text":"<p>Keep as-is - single source of truth for configuration</p>"},{"location":"REDUNDANCY-REVIEW/#architecturemd","title":"ARCHITECTURE.md","text":"<p>Keep as-is - technical deep dive for contributors</p>"},{"location":"REDUNDANCY-REVIEW/#developmentmd","title":"DEVELOPMENT.md","text":"<p>Merge CONTRIBUTING.md into this file and rename to \"Contributing Guide\"</p>"},{"location":"REDUNDANCY-REVIEW/#internal-documentation","title":"Internal Documentation","text":"<p>Move to docs/internal/ (not in navigation): - TESTING-INSTALL.md \u2192 docs/internal/testing-install.md - RELEASE.md \u2192 docs/internal/release-process.md - DOCUMENTATION-SITE.md \u2192 docs/internal/documentation.md</p> <p>Reference from DEVELOPMENT.md with links for contributors who need them.</p>"},{"location":"REDUNDANCY-REVIEW/#benefits-of-reorganization","title":"Benefits of Reorganization","text":"<ol> <li>Reduced Redundancy</li> <li>No duplicate \"What is Weft\" sections</li> <li>Single source of truth for agents, config, installation</li> <li> <p>Clear separation of concerns</p> </li> <li> <p>Improved Discoverability</p> </li> <li>Clearer navigation structure</li> <li>Easier to find authoritative documentation</li> <li> <p>Less confusion about where to look</p> </li> <li> <p>Better Maintenance</p> </li> <li>Update content in one place, not three</li> <li>Reduced risk of inconsistent information</li> <li> <p>Easier for contributors</p> </li> <li> <p>Cleaner User Experience</p> </li> <li>Main navigation focused on user-facing docs</li> <li>Internal docs hidden but accessible</li> <li> <p>Faster to find relevant information</p> </li> <li> <p>Professional Polish</p> </li> <li>Matches documentation standards of mature projects (GitHub CLI, Homebrew, etc.)</li> <li>Clear hierarchy and organization</li> <li>Focused landing page</li> </ol>"},{"location":"REDUNDANCY-REVIEW/#implementation-checklist","title":"Implementation Checklist","text":""},{"location":"REDUNDANCY-REVIEW/#phase-1-content-consolidation","title":"Phase 1: Content Consolidation","text":"<ul> <li> Simplify index.md (remove detailed agent table, detailed workflow)</li> <li> Delete or repurpose OVERVIEW.md</li> <li> Remove configuration section from OVERVIEW.md</li> <li> Remove agent specs from index.md and OVERVIEW.md</li> <li> Remove philosophy duplication</li> </ul>"},{"location":"REDUNDANCY-REVIEW/#phase-2-navigation-restructuring","title":"Phase 2: Navigation Restructuring","text":"<ul> <li> Update mkdocs.yml navigation</li> <li> Move internal docs to docs/internal/</li> <li> Merge CONTRIBUTING.md into DEVELOPMENT.md</li> <li> Update cross-references in all files</li> </ul>"},{"location":"REDUNDANCY-REVIEW/#phase-3-cleanup","title":"Phase 3: Cleanup","text":"<ul> <li> Fix all broken links</li> <li> Update \"See Also\" sections</li> <li> Test all navigation paths</li> <li> Verify no orphaned content</li> </ul>"},{"location":"REDUNDANCY-REVIEW/#phase-4-quality-check","title":"Phase 4: Quality Check","text":"<ul> <li> Build documentation site locally</li> <li> Review all pages for consistency</li> <li> Check mobile responsiveness</li> <li> Final review by team</li> </ul>"},{"location":"REDUNDANCY-REVIEW/#estimated-impact","title":"Estimated Impact","text":"<p>Lines of documentation removed: ~800-1000 lines (redundant content) Files removed/moved: 3-4 files (OVERVIEW.md, internal docs) Navigation sections reduced: 5 \u2192 3 top-level sections Maintenance burden reduced: ~40% (single source of truth) User experience improved: Faster time to find relevant documentation</p>"},{"location":"REDUNDANCY-REVIEW/#next-steps","title":"Next Steps","text":"<ol> <li>Decision: Choose Option A (remove OVERVIEW.md) or Option B (repurpose as QUICKSTART.md)</li> <li>Review: Team review this document and approve reorganization</li> <li>Implementation: Execute checklist phases</li> <li>Testing: Verify all links and navigation work correctly</li> <li>Deploy: Update documentation site</li> </ol> <p>Document created: 2026-01-06 Review status: Pending team review</p>"},{"location":"TROUBLESHOOTING/","title":"Troubleshooting Guide","text":"<p>Common issues and solutions for Weft.</p>"},{"location":"TROUBLESHOOTING/#installation-issues","title":"Installation Issues","text":""},{"location":"TROUBLESHOOTING/#command-not-found-weft","title":"Command not found: weft","text":"<p>Problem: After installation, <code>weft</code> command not available</p> <p>Solutions:</p> <pre><code># Verify installation\npip show weft\n\n# Reinstall in development mode\npip install -e .\n\n# Check PATH\nwhich weft\n\n# If not in PATH, use absolute path\npython -m weft.cli.main --version\n</code></pre>"},{"location":"TROUBLESHOOTING/#importerror-or-modulenotfounderror","title":"ImportError or ModuleNotFoundError","text":"<p>Problem: Python can't find weft modules</p> <p>Solutions:</p> <pre><code># Ensure you're in virtual environment\nsource venv/bin/activate\n\n# Reinstall dependencies\npip install -r requirements.txt\npip install -e .\n\n# Check Python version\npython --version  # Must be 3.11+\n</code></pre>"},{"location":"TROUBLESHOOTING/#configuration-issues","title":"Configuration Issues","text":""},{"location":"TROUBLESHOOTING/#weftrcyaml-not-found","title":".weftrc.yaml not found","text":"<p>Problem: <code>weft up</code> says config not found</p> <p>Solutions:</p> <pre><code># Initialize first\nweft init\n\n# Verify file exists\nls -la .weftrc.yaml\n\n# Check you're in project root\npwd\n</code></pre>"},{"location":"TROUBLESHOOTING/#api-key-not-recognized","title":"API key not recognized","text":"<p>Problem: \"API key not found\" error</p> <p>Solutions:</p> <pre><code># Check environment variable is set\necho $ANTHROPIC_API_KEY\n\n# Set it if missing\nexport ANTHROPIC_API_KEY=sk-ant-api03-your-key\n\n# Or add to .env file\necho \"ANTHROPIC_API_KEY=sk-ant-api03-your-key\" &gt; .env\n\n# Verify format (should start with sk-ant-)\necho $ANTHROPIC_API_KEY | grep \"^sk-ant\"\n</code></pre>"},{"location":"TROUBLESHOOTING/#invalid-configuration-error","title":"Invalid configuration error","text":"<p>Problem: YAML syntax or validation errors</p> <p>Solutions:</p> <pre><code># Check YAML syntax\npython -c \"import yaml; yaml.safe_load(open('.weftrc.yaml'))\"\n\n# Common issues:\n# - Missing colons\n# - Wrong indentation (use spaces, not tabs)\n# - Unquoted special characters\n\n# Regenerate config\nmv .weftrc.yaml .weftrc.yaml.bak\nweft init\n</code></pre>"},{"location":"TROUBLESHOOTING/#docker-issues","title":"Docker Issues","text":""},{"location":"TROUBLESHOOTING/#docker-daemon-not-running","title":"Docker daemon not running","text":"<p>Problem: \"Docker daemon is not running\"</p> <p>Solutions:</p> <pre><code># Start Docker Desktop (macOS/Windows)\nopen -a Docker  # macOS\n# Or launch Docker Desktop from Applications\n\n# Linux: start docker service\nsudo systemctl start docker\n\n# Verify\ndocker ps\n</code></pre>"},{"location":"TROUBLESHOOTING/#permission-denied-on-docker-socket","title":"Permission denied on Docker socket","text":"<p>Problem: Can't access /var/run/docker.sock</p> <p>Solutions:</p> <pre><code># Linux: add user to docker group\nsudo usermod -aG docker $USER\n\n# Log out and back in for changes to take effect\n\n# Or run with sudo (not recommended)\nsudo weft up\n</code></pre>"},{"location":"TROUBLESHOOTING/#container-fails-to-start","title":"Container fails to start","text":"<p>Problem: weft-watcher-* containers exit immediately</p> <p>Solutions:</p> <pre><code># Check logs\nweft logs meta\n\n# Or use docker directly\ndocker logs weft-watcher-meta\n\n# Common causes:\n# - Missing environment variables\n# - Invalid API key\n# - Path mounting issues\n\n# Verify environment\ndocker inspect weft-watcher-meta | grep -A 10 Env\n</code></pre>"},{"location":"TROUBLESHOOTING/#port-already-in-use","title":"Port already in use","text":"<p>Problem: \"Port 8080 is already allocated\"</p> <p>Solutions:</p> <pre><code># Find what's using the port\nlsof -i :8080\n\n# Kill the process\nkill &lt;PID&gt;\n\n# Or use different port in docker-compose.yml\n</code></pre>"},{"location":"TROUBLESHOOTING/#runtime-issues","title":"Runtime Issues","text":""},{"location":"TROUBLESHOOTING/#agent-not-processing-prompts","title":"Agent not processing prompts","text":"<p>Problem: Files in <code>in/</code> directory not being processed</p> <p>Solutions:</p> <pre><code># Check watcher is running\ndocker ps | grep watcher-meta\n\n# View logs\nweft logs meta --follow\n\n# Check file permissions\nls -la ../weft-ai-history/feature-name/00-meta/in/\n\n# Ensure file is .md format\nmv prompt.txt prompt.md\n\n# Wait for poll interval (default 2 seconds)\n# Or restart runtime\nweft down &amp;&amp; weft up\n</code></pre>"},{"location":"TROUBLESHOOTING/#slow-agent-response","title":"Slow agent response","text":"<p>Problem: Agents taking too long to process</p> <p>Causes &amp; Solutions:</p> <pre><code># 1. Large prompts\n# Solution: Break into smaller prompts\n\n# 2. Slow model\n# Solution: Use faster model\nexport CLAUDE_MODEL=claude-3-haiku-20240307\n\n# 3. High poll interval\n# Solution: Reduce interval\nexport POLL_INTERVAL=1\n\n# 4. API rate limits\n# Check Anthropic dashboard for rate limit status\n</code></pre>"},{"location":"TROUBLESHOOTING/#agent-produces-unexpected-output","title":"Agent produces unexpected output","text":"<p>Problem: Output doesn't match expectations</p> <p>Solutions:</p> <pre><code># 1. Review prompt specification\ncat .weft/prompts/v1.0.0/00_meta.md\n\n# 2. Customize prompt spec\nvim .weft/prompts/v1.0.0/00_meta.md\nweft down &amp;&amp; weft up\n\n# 3. Provide more context in input\n# Include examples, constraints, format requirements\n\n# 4. Iterate with refined prompts\necho \"Refined prompt...\" &gt; ai-history/.../in/v2.md\n</code></pre>"},{"location":"TROUBLESHOOTING/#feature-management-issues","title":"Feature Management Issues","text":""},{"location":"TROUBLESHOOTING/#feature-creation-fails","title":"Feature creation fails","text":"<p>Problem: <code>weft feature create</code> errors</p> <p>Solutions:</p> <pre><code># Check project is initialized\nls -la .weftrc.yaml\n\n# Verify AI history path exists\nls -la ../weft-ai-history\n\n# Check permissions\nchmod -R u+w ../weft-ai-history\n\n# Use valid feature name (alphanumeric, dash, underscore)\nweft feature create user-auth  # Good\nweft feature create \"User Auth!\"  # Bad (spaces, special chars)\n</code></pre>"},{"location":"TROUBLESHOOTING/#cant-start-feature","title":"Can't start feature","text":"<p>Problem: <code>weft feature start</code> fails</p> <p>Solutions:</p> <pre><code># Ensure feature exists\nweft feature list\n\n# Create if needed\nweft feature create my-feature\n\n# Check feature isn't already started\nweft feature status my-feature\n</code></pre>"},{"location":"TROUBLESHOOTING/#merge-conflict-with-untracked-files","title":"Merge conflict with untracked files","text":"<p>Problem: Merge fails with error: \"The following untracked working tree files would be overwritten by merge\"</p> <p>Symptoms: <pre><code>\u274c Error merging: error: The following untracked working tree files would be overwritten by merge:\n    .gitignore\nPlease move or remove them before you merge.\nAborting\n</code></pre></p> <p>Root Cause: Feature branch contains tracked files (e.g., <code>.gitignore</code>) that conflict with untracked files in the main working directory.</p> <p>Solution:</p> <pre><code># 1. Move or backup the untracked file(s)\ncd /path/to/code-repo\nmv .gitignore .gitignore.backup\n\n# 2. Retry the merge\ngit merge feature/your-feature-name\n\n# 3. If you want to preserve content from the untracked file, merge manually\ncat .gitignore.backup &gt;&gt; .gitignore\nrm .gitignore.backup\ngit add .gitignore\ngit commit -m \"chore: Merge .gitignore content\"\n</code></pre> <p>Prevention: - Commit tracked files (<code>.gitignore</code>, etc.) before creating features - Use <code>git status</code> to check for untracked files before merging - Consider adding common files to <code>.gitignore</code> early in project setup</p>"},{"location":"TROUBLESHOOTING/#ai-history-issues","title":"AI History Issues","text":""},{"location":"TROUBLESHOOTING/#permission-denied-on-history-path","title":"Permission denied on history path","text":"<p>Problem: Can't write to AI history directory</p> <p>Solutions:</p> <pre><code># Check path exists\nls -la ../weft-ai-history\n\n# Fix permissions\nchmod -R u+w ../weft-ai-history\n\n# Or use different path\nvim .weftrc.yaml\n# Change ai.history_path to accessible location\n</code></pre>"},{"location":"TROUBLESHOOTING/#history-repository-conflicts","title":"History repository conflicts","text":"<p>Problem: Git conflicts in AI history</p> <p>Solutions:</p> <pre><code>cd ../weft-ai-history\n\n# View conflicts\ngit status\n\n# Resolve manually or keep both versions\ngit checkout --ours conflicted_file.md\ngit checkout --theirs conflicted_file.md\n\n# Or reset to clean state\ngit reset --hard HEAD\n</code></pre>"},{"location":"TROUBLESHOOTING/#performance-issues","title":"Performance Issues","text":""},{"location":"TROUBLESHOOTING/#high-cpu-usage","title":"High CPU usage","text":"<p>Problem: Docker containers using excessive CPU</p> <p>Solutions:</p> <pre><code># Check container stats\ndocker stats\n\n# Reduce poll frequency\nexport POLL_INTERVAL=5\n\n# Limit container resources (docker-compose.yml)\nresources:\n  limits:\n    cpus: '0.5'\n    memory: 512M\n</code></pre>"},{"location":"TROUBLESHOOTING/#high-memory-usage","title":"High memory usage","text":"<p>Problem: Memory exhaustion</p> <p>Solutions:</p> <pre><code># Use lighter model\nexport CLAUDE_MODEL=claude-3-haiku-20240307\n\n# Restart runtime periodically\nweft down &amp;&amp; weft up\n\n# Clear Docker cache\ndocker system prune\n</code></pre>"},{"location":"TROUBLESHOOTING/#networking-issues","title":"Networking Issues","text":""},{"location":"TROUBLESHOOTING/#cant-reach-claude-api","title":"Can't reach Claude API","text":"<p>Problem: \"Connection error\" or timeouts</p> <p>Solutions:</p> <pre><code># Check internet connectivity\nping api.anthropic.com\n\n# Test API key manually\ncurl https://api.anthropic.com/v1/messages \\\n  -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n  -H \"anthropic-version: 2023-06-01\" \\\n  -H \"content-type: application/json\" \\\n  -d '{\"model\":\"claude-3-5-sonnet-20241022\",\"messages\":[{\"role\":\"user\",\"content\":\"test\"}],\"max_tokens\":10}'\n\n# Check proxy settings\necho $HTTP_PROXY\necho $HTTPS_PROXY\n\n# Configure proxy if needed\nexport HTTPS_PROXY=http://proxy.company.com:8080\n</code></pre>"},{"location":"TROUBLESHOOTING/#getting-help","title":"Getting Help","text":"<p>If you can't resolve an issue:</p> <ol> <li> <p>Check logs: <pre><code>weft logs meta --tail 100\ndocker logs weft-watcher-meta\n</code></pre></p> </li> <li> <p>Search existing issues: GitHub Issues</p> </li> <li> <p>Create a bug report:</p> <p>Include:</p> <ul> <li>Weft version (<code>weft --version</code>)</li> <li>Operating system</li> <li>Docker version</li> <li>Python version</li> <li>Complete error message</li> <li>Steps to reproduce</li> </ul> </li> <li> <p>Ask in discussions: GitHub Discussions</p> </li> </ol>"},{"location":"TROUBLESHOOTING/#debugging-techniques","title":"Debugging Techniques","text":""},{"location":"TROUBLESHOOTING/#enable-verbose-logging","title":"Enable verbose logging","text":"<pre><code>weft --verbose up\nweft --verbose feature create test\n</code></pre>"},{"location":"TROUBLESHOOTING/#inspect-docker-containers","title":"Inspect Docker containers","text":"<pre><code># List all containers\ndocker ps -a\n\n# Inspect container\ndocker inspect weft-watcher-meta\n\n# Execute command in container\ndocker exec -it weft-watcher-meta /bin/bash\n</code></pre>"},{"location":"TROUBLESHOOTING/#test-components-individually","title":"Test components individually","text":"<pre><code># Test API connection\npython -c \"from weft.ai.claude_client import ClaudeClient; print(ClaudeClient().generate('test'))\"\n\n# Test configuration loading\npython -c \"from weft.config.project import load_weftrc; print(load_weftrc())\"\n\n# Test agent directly\npython -m weft.agents.meta_agent feature-name\n</code></pre>"},{"location":"TROUBLESHOOTING/#check-file-system-state","title":"Check file system state","text":"<pre><code># Project structure\ntree -L 3 .weft/\n\n# AI history structure\ntree -L 3 ../weft-ai-history/\n\n# Docker volumes\ndocker volume ls\ndocker volume inspect weft_ai-history\n</code></pre>"},{"location":"TROUBLESHOOTING/#see-also","title":"See Also","text":"<ul> <li>Installation Guide - Setup guide</li> <li>Configuration - Config reference</li> <li>CLI Reference - Command documentation</li> <li>GitHub Issues - Report bugs</li> </ul>"},{"location":"community/CHANGELOG/","title":"Changelog","text":"<p>All notable changes to Weft will be documented in this file.</p> <p>The format is based on Keep a Changelog, and this project adheres to Semantic Versioning.</p>"},{"location":"community/CHANGELOG/#unreleased","title":"Unreleased","text":""},{"location":"community/CHANGELOG/#added","title":"Added","text":"<ul> <li>Multiple installation methods: Homebrew tap, pipx, and curl install script</li> <li>Comprehensive installation documentation with troubleshooting</li> <li>Automated release workflow with GitHub Actions</li> <li>Homebrew formula for macOS/Linux package manager distribution</li> <li>CI/CD tests for install script across multiple platforms and Python versions</li> <li>Install script handles PEP 668 externally-managed environments (macOS Homebrew Python)</li> <li>Local testing mode for install script (<code>WEFT_LOCAL_INSTALL=1</code>)</li> </ul>"},{"location":"community/CHANGELOG/#010-2025-01-xx","title":"0.1.0 - 2025-01-XX","text":""},{"location":"community/CHANGELOG/#added_1","title":"Added","text":"<ul> <li>Initial release of Weft CLI - AI-assisted software development workflow system</li> <li>6 Role-Based AI Agents:</li> <li>Agent 00 (Meta): Feature understanding and design brief generation</li> <li>Agent 01 (Architect): Domain modeling, use cases, and API requirements</li> <li>Agent 02 (OpenAPI): API specification creation and validation</li> <li>Agent 03 (UI Skeleton): Layout and component scaffolding</li> <li>Agent 04 (Integration): API wiring and state management</li> <li>Agent 05 (Test &amp; Review): Test generation and code risk review</li> <li>File-Based Task Queue System: Watcher processes monitor <code>in/</code> directories for prompts</li> <li>Git Worktree Integration: Isolated development environments for each feature</li> <li>Feature Lifecycle Management:</li> <li><code>weft feature create</code> - Interactive spec creation with Agent 00</li> <li><code>weft feature start</code> - Run agent pipeline on feature</li> <li><code>weft feature review</code> - Inspect outputs and merge to main</li> <li><code>weft feature drop</code> - Abandon feature and cleanup</li> <li><code>weft feature list</code> - View all active features</li> <li>Docker Compose Development Environment: Containerized watchers with proper isolation</li> <li>Claude API Integration: Retry logic with exponential backoff, rate limit handling</li> <li>Interactive Prompt Iteration: Refine specifications through conversation with agents</li> <li>Conversation Context Preservation: Agents maintain context across prompt iterations</li> <li>Code Generation &amp; Application: Parse AI-generated code blocks and apply to filesystem</li> <li>Comprehensive Test Suite: 620+ tests with 90%+ coverage</li> <li>Unit tests mirror source structure</li> <li>Integration tests for multi-agent workflows</li> <li>End-to-end pipeline tests</li> </ul>"},{"location":"community/CHANGELOG/#documentation","title":"Documentation","text":"<ul> <li>Complete CLI reference with all commands and options</li> <li>Getting started guide with hands-on tutorial (user authentication example)</li> <li>Architecture deep dive explaining agent model and data flow</li> <li>Configuration reference for <code>.weftrc.yaml</code> and environment variables</li> <li>Troubleshooting guide with common issues and solutions</li> <li>Contributing guidelines with PR process and code standards</li> <li>Development guide with setup instructions and testing philosophy</li> <li>Agent specifications with prompt templates and versioning strategy</li> </ul>"},{"location":"community/CHANGELOG/#configuration","title":"Configuration","text":"<ul> <li><code>.weftrc.yaml</code> project configuration file</li> <li>Environment variable support for secrets (API keys, tokens)</li> <li>User-level config (<code>~/.weft/config.yaml</code>) for global settings</li> <li>Runtime config for Docker Compose orchestration</li> </ul>"},{"location":"community/CHANGELOG/#security","title":"Security","text":"<ul> <li>No automatic code execution - human review gates mandatory</li> <li>Read-only code repository mounts in Docker</li> <li>API keys via environment variables only (never in configs)</li> <li>Full audit trail of all AI interactions (versioned in AI history repo)</li> <li>SHA256 hashing of prompts and outputs for verification</li> </ul>"},{"location":"community/CHANGELOG/#known-limitations","title":"Known Limitations","text":"<ul> <li>Conversation context uses 60-second timestamp matching: If agent processing takes &gt;60 seconds, context may be lost (planned fix in v0.2)</li> <li>Single-threaded agent processing: Agents process one prompt at a time sequentially</li> <li>LocalLLM backend not implemented: Only Claude API supported in v0.1 (Ollama planned for M4)</li> <li>No observability/tracing: OpenTelemetry integration planned for M3</li> <li>Manual conflict resolution: Merge conflicts require manual intervention in separate shell</li> </ul>"},{"location":"community/CHANGELOG/#dependencies","title":"Dependencies","text":"<ul> <li>Python &gt;=3.11</li> <li>anthropic &gt;=0.27.0,&lt;1.0.0</li> <li>click &gt;=8.1.0</li> <li>python-dotenv &gt;=1.0.0</li> <li>pyyaml &gt;=6.0</li> <li>pydantic &gt;=2.0.0</li> </ul>"},{"location":"community/CHANGELOG/#development-dependencies","title":"Development Dependencies","text":"<ul> <li>pytest &gt;=7.4.0</li> <li>pytest-cov &gt;=4.1.0</li> <li>pytest-mock &gt;=3.12.0</li> <li>pytest-timeout &gt;=2.1.0</li> <li>black &gt;=23.0.0</li> <li>ruff &gt;=0.1.0</li> <li>mypy &gt;=1.7.0</li> </ul>"},{"location":"community/CONTRIBUTING/","title":"Contributing to Weft","text":"<p>Thank you for your interest in contributing!</p>"},{"location":"community/CONTRIBUTING/#development-setup","title":"Development Setup","text":""},{"location":"community/CONTRIBUTING/#prerequisites","title":"Prerequisites","text":"<ul> <li>Python 3.11 or higher</li> <li>Git</li> <li>Anthropic API key</li> </ul>"},{"location":"community/CONTRIBUTING/#setup-steps","title":"Setup Steps","text":"<ol> <li> <p>Clone repository: <pre><code>git clone https://github.com/weftlabs/weft-cli.git\ncd weft-cli\n</code></pre></p> </li> <li> <p>Create virtual environment: <pre><code>python -m venv venv\nsource venv/bin/activate  # On Windows: venv\\Scripts\\activate\n</code></pre></p> </li> <li> <p>Install in development mode: <pre><code>pip install -e \".[dev]\"\n</code></pre></p> </li> <li> <p>Configure environment: <pre><code>cp .env.example .env\n# Edit .env and add your CLAUDE_API_KEY\n</code></pre></p> </li> <li> <p>Run tests: <pre><code>pytest\n</code></pre></p> </li> </ol>"},{"location":"community/CONTRIBUTING/#code-style","title":"Code Style","text":""},{"location":"community/CONTRIBUTING/#python-style-guide","title":"Python Style Guide","text":"<ul> <li>Follow PEP 8</li> <li>Use Black for formatting</li> <li>Use type hints for all functions</li> <li>Write docstrings for all public APIs</li> </ul> <p>Format code: <pre><code>black src/ tests/\n</code></pre></p> <p>Check types: <pre><code>mypy src/\n</code></pre></p>"},{"location":"community/CONTRIBUTING/#docstring-format","title":"Docstring Format","text":"<p>Weft uses minimal docstrings per the coding standards:</p> <pre><code>\"\"\"Configuration management for Weft projects.\"\"\"\n\ndef load_weftrc(path: Path | None = None) -&gt; WeftRC | None:\n    \"\"\"Load and validate .weftrc.yaml file.\"\"\"\n    # Implementation...\n</code></pre> <p>Rules: - Module-level: 1 sentence describing purpose - Public functions: 1-2 lines max, only if intent not obvious - NO Args/Returns/Raises sections - NO examples in docstrings (use tests instead) - Prefer clear naming over verbose documentation</p>"},{"location":"community/CONTRIBUTING/#testing-requirements","title":"Testing Requirements","text":""},{"location":"community/CONTRIBUTING/#writing-tests","title":"Writing Tests","text":"<ul> <li>Unit tests: Test individual functions/classes</li> <li>Integration tests: Test full workflows</li> <li>Coverage: Aim for 90%+ coverage</li> <li>No network calls: Mock external APIs</li> </ul>"},{"location":"community/CONTRIBUTING/#running-tests","title":"Running Tests","text":"<pre><code># Run all tests\npytest\n\n# Run with coverage\npytest --cov=src/weft --cov-report=term-missing\n\n# Run specific test\npytest tests/unit/test_config.py -v\n\n# Run integration tests only\npytest tests/integration/ -v\n</code></pre>"},{"location":"community/CONTRIBUTING/#test-structure","title":"Test Structure","text":"<pre><code>def test_feature_name():\n    \"\"\"Test description.\"\"\"\n    # Arrange\n    input_data = ...\n\n    # Act\n    result = function_under_test(input_data)\n\n    # Assert\n    assert result == expected_value\n</code></pre>"},{"location":"community/CONTRIBUTING/#pull-request-process","title":"Pull Request Process","text":""},{"location":"community/CONTRIBUTING/#before-submitting","title":"Before Submitting","text":"<ol> <li> <p>Create feature branch: <pre><code>git checkout -b feature/your-feature-name\n</code></pre></p> </li> <li> <p>Make changes:</p> </li> <li>Write code</li> <li>Add tests</li> <li> <p>Update documentation</p> </li> <li> <p>Run checks: <pre><code># Format code\nblack src/ tests/\n\n# Lint code\nruff check src/ tests/\n\n# Run tests\npytest --cov=weft\n\n# Check types (optional - known issues)\nmypy src/\n</code></pre></p> </li> <li> <p>Commit: <pre><code>git add .\ngit commit -m \"feat: Add feature description\"\n</code></pre></p> </li> </ol>"},{"location":"community/CONTRIBUTING/#commit-message-format","title":"Commit Message Format","text":"<p>Follow Conventional Commits:</p> <pre><code>&lt;type&gt;: &lt;description&gt;\n\n[optional body]\n\n[optional footer]\n</code></pre> <p>Types: - <code>feat:</code> New feature - <code>fix:</code> Bug fix - <code>docs:</code> Documentation only - <code>test:</code> Adding tests - <code>refactor:</code> Code refactoring - <code>style:</code> Code style changes - <code>chore:</code> Maintenance tasks</p> <p>Examples: <pre><code>feat: Add database agent implementation\nfix: Handle empty prompt edge case\ndocs: Update CLI reference with new command\ntest: Add integration test for feature workflow\n</code></pre></p>"},{"location":"community/CONTRIBUTING/#creating-pull-request","title":"Creating Pull Request","text":"<ol> <li> <p>Push branch: <pre><code>git push origin feature/your-feature-name\n</code></pre></p> </li> <li> <p>Open PR on GitHub</p> </li> <li> <p>PR Checklist:</p> </li> <li> Tests pass</li> <li> Coverage &gt;= 90%</li> <li> Documentation updated</li> <li> CHANGELOG.md updated</li> <li> Type hints added</li> <li> <p> Docstrings written</p> </li> <li> <p>Wait for review</p> </li> </ol>"},{"location":"community/CONTRIBUTING/#cicd-checks","title":"CI/CD Checks","text":"<p>All pull requests must pass automated CI checks before merging:</p> <p>Automated Checks: - \u2705 Lint - Code formatting (black) and style (ruff) - \u2705 Test (Python 3.11) - Full test suite on Python 3.11 - \u2705 Test (Python 3.12) - Full test suite on Python 3.12</p> <p>Status indicators appear at the bottom of your PR: - \ud83d\udfe2 Green checkmark = passed - \ud83d\udd34 Red X = failed - \ud83d\udfe1 Yellow circle = running</p> <p>If checks fail: 1. Click \"Details\" to see the error 2. Fix the issue locally 3. Push the fix to your branch 4. CI will automatically re-run</p> <p>Common failures: - Black formatting: Run <code>black src/ tests/</code> locally - Ruff linting: Run <code>ruff check src/ tests/ --fix</code> to auto-fix - Test failures: Run <code>pytest</code> locally to reproduce - Coverage too low: Add tests for uncovered code</p> <p>Branch Protection: - Direct commits to <code>main</code> are blocked - All changes must go through PR - Requires 1+ approval and passing CI checks - See <code>.github/BRANCH_PROTECTION.md</code> for details</p>"},{"location":"community/CONTRIBUTING/#after-review","title":"After Review","text":"<ul> <li>Address review comments</li> <li>Push changes</li> <li>Request re-review</li> </ul>"},{"location":"community/CONTRIBUTING/#issue-reporting","title":"Issue Reporting","text":""},{"location":"community/CONTRIBUTING/#bug-reports","title":"Bug Reports","text":"<p>Include: - Description of bug - Steps to reproduce - Expected behavior - Actual behavior - Environment (OS, Python version) - Error messages/logs</p>"},{"location":"community/CONTRIBUTING/#feature-requests","title":"Feature Requests","text":"<p>Include: - Description of feature - Use case - Proposed API/interface - Examples</p>"},{"location":"community/CONTRIBUTING/#development-workflow","title":"Development Workflow","text":""},{"location":"community/CONTRIBUTING/#adding-a-new-agent","title":"Adding a New Agent","text":"<p>See <code>docs/AGENTS.md</code> for agent specifications and <code>docs/ARCHITECTURE.md</code> for system design.</p>"},{"location":"community/CONTRIBUTING/#adding-a-new-cli-command","title":"Adding a New CLI Command","text":"<ol> <li>Create command file: <code>src/weft/cli/mycommand.py</code></li> <li>Implement using Click</li> <li>Register in <code>main.py</code></li> <li>Add tests</li> <li>Update documentation</li> </ol>"},{"location":"community/CONTRIBUTING/#modifying-prompt-specs","title":"Modifying Prompt Specs","text":"<p>Prompt specs follow semantic versioning. See <code>prompt-specs/</code> directory for current versions.</p>"},{"location":"community/CONTRIBUTING/#resources","title":"Resources","text":"<ul> <li>Development Guide</li> <li>Architecture</li> <li>Agent Specifications</li> <li>CLI Reference</li> <li>Installation Guide</li> </ul>"},{"location":"community/CONTRIBUTING/#questions","title":"Questions?","text":"<ul> <li>Open an issue</li> <li>Check existing documentation</li> <li>Ask in discussions</li> </ul> <p>Thank you for contributing!</p>"},{"location":"community/LICENSE/","title":"License","text":"<p>MIT License</p> <p>Copyright \u00a9 2025 Weft</p> <p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the \"Software\"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p> <p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p> <p>THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</p>"},{"location":"community/SECURITY/","title":"Security Policy","text":""},{"location":"community/SECURITY/#supported-versions","title":"Supported Versions","text":"<p>We release patches for security vulnerabilities. Currently supported versions:</p> Version Supported 0.1.x &lt; 0.1"},{"location":"community/SECURITY/#reporting-a-vulnerability","title":"Reporting a Vulnerability","text":"<p>We take security vulnerabilities seriously. If you discover a security issue in Weft, please report it responsibly:</p>"},{"location":"community/SECURITY/#reporting-process","title":"Reporting Process","text":"<ol> <li>Do NOT open a public GitHub issue for security vulnerabilities</li> <li>Use GitHub's Security Advisory feature:<ul> <li>Go to the Security tab</li> <li>Click \"Report a vulnerability\"</li> <li>Fill out the private security advisory form</li> </ul> </li> <li>Or email directly (if you prefer): security@weftlabs.com</li> </ol>"},{"location":"community/SECURITY/#what-to-include-in-your-report","title":"What to Include in Your Report","text":"<p>To help us triage and fix the issue quickly, please include:</p> <ul> <li>Description of the vulnerability</li> <li>Steps to reproduce the issue</li> <li>Affected versions of Weft</li> <li>Potential impact (e.g., data exposure, code execution)</li> <li>Suggested fix (if you have one)</li> <li>Your contact information (for follow-up questions)</li> </ul>"},{"location":"community/SECURITY/#response-timeline","title":"Response Timeline","text":"<ul> <li>Initial response: Within 48 hours</li> <li>Status update: Within 7 days</li> <li>Fix timeline: Depends on severity</li> <li>Critical: Patch within 7 days</li> <li>High: Patch within 30 days</li> <li>Medium/Low: Addressed in next planned release</li> </ul>"},{"location":"community/SECURITY/#disclosure-policy","title":"Disclosure Policy","text":"<ul> <li>Please give us reasonable time to fix the issue before public disclosure</li> <li>We will credit you in the security advisory (unless you prefer to remain anonymous)</li> <li>Coordinated disclosure: We'll work with you on timing of public announcements</li> </ul>"},{"location":"community/SECURITY/#security-best-practices-for-users","title":"Security Best Practices for Users","text":"<p>When using Weft, follow these security guidelines:</p>"},{"location":"community/SECURITY/#api-keys-and-secrets","title":"API Keys and Secrets","text":"<ul> <li>Never commit API keys to version control</li> <li>Use environment variables: Store <code>ANTHROPIC_API_KEY</code> in <code>.env</code> file (add to <code>.gitignore</code>)</li> <li>Use dotenv files: Keep <code>.env</code> outside of Git repositories</li> <li>Rotate keys regularly: Change API keys every 90 days as a best practice</li> </ul>"},{"location":"community/SECURITY/#ai-generated-code-review","title":"AI-Generated Code Review","text":"<ul> <li>Always review AI outputs before accepting (human-in-the-loop is mandatory)</li> <li>Check for security vulnerabilities: SQL injection, XSS, command injection, etc.</li> <li>Validate input handling: Ensure generated code sanitizes user input</li> <li>Review dependencies: Check if AI suggests insecure or outdated packages</li> </ul>"},{"location":"community/SECURITY/#data-privacy","title":"Data Privacy","text":"<ul> <li>Avoid passing secrets to AI agents in prompts</li> <li>Don't include PII: Keep user data and personally identifiable information out of prompts</li> <li>Review logs: AI history contains all prompts - ensure no sensitive data leaked</li> <li>Use read-only mounts: Docker configurations mount code repositories as read-only</li> </ul>"},{"location":"community/SECURITY/#docker-and-container-security","title":"Docker and Container Security","text":"<ul> <li>Use read-only mounts for code repositories (default configuration)</li> <li>Run as non-root: Container users should not have root privileges</li> <li>Keep images updated: Regularly pull latest base images</li> <li>Limit network access: Watchers only need API access, not full internet</li> </ul>"},{"location":"community/SECURITY/#git-and-version-control","title":"Git and Version Control","text":"<ul> <li>Validate AI-generated commits: Review all code before merging to main branch</li> <li>Use feature branches: Worktrees isolate experimental code</li> <li>Sign commits (optional): Consider GPG signing for added verification</li> <li>Audit AI history repo: Regularly review AI history for unexpected changes</li> </ul>"},{"location":"community/SECURITY/#dependencies","title":"Dependencies","text":"<ul> <li>Use lockfile: Install from <code>requirements-lock.txt</code> for reproducible builds</li> <li>Run security scans: Use tools like <code>pip-audit</code> or <code>safety</code> to check for CVEs</li> <li>Keep dependencies updated: Update regularly but test thoroughly</li> <li>Review transitive deps: AI agents may suggest packages with vulnerable dependencies</li> </ul>"},{"location":"community/SECURITY/#known-security-considerations","title":"Known Security Considerations","text":""},{"location":"community/SECURITY/#ai-generated-code-risks","title":"AI-Generated Code Risks","text":"<ul> <li>No sandbox execution: AI-generated code is not run in a sandbox during review</li> <li>Code quality varies: AI may generate insecure patterns (SQL injection, XSS, etc.)</li> <li>Dependency suggestions: AI may suggest outdated or vulnerable packages</li> <li>Mitigation: Mandatory human review before accepting any AI outputs</li> </ul>"},{"location":"community/SECURITY/#data-sent-to-ai","title":"Data Sent to AI","text":"<ul> <li>Full feature specification: Agent 00 receives your entire feature description</li> <li>Previous outputs: Subsequent agents receive outputs from earlier agents</li> <li>Code context: Integration agent may receive existing code patterns</li> <li>Mitigation: Avoid including secrets, PII, or proprietary algorithms in prompts</li> </ul>"},{"location":"community/SECURITY/#git-operations","title":"Git Operations","text":"<ul> <li>Trust assumption: Git operations assume trusted repository (no signature verification)</li> <li>Merge conflicts: Manual resolution required - potential for mistakes</li> <li>Worktree isolation: Features are isolated but share git object database</li> <li>Mitigation: Review all merges carefully, use protected branches</li> </ul>"},{"location":"community/SECURITY/#network-and-api","title":"Network and API","text":"<ul> <li>Claude API calls: All AI processing goes through Anthropic's API</li> <li>Retry logic: Failed requests are retried automatically (may expose patterns)</li> <li>Rate limiting: Excessive requests may trigger rate limits</li> <li>Mitigation: API keys are never logged, use environment variables only</li> </ul>"},{"location":"community/SECURITY/#docker-and-file-system","title":"Docker and File System","text":"<ul> <li>Shared volumes: AI history repo is mounted read-write for watchers</li> <li>File permissions: Watchers write to filesystem (but only in designated directories)</li> <li>Container escape: Docker misconfigurations could allow container escape</li> <li>Mitigation: Use provided Docker Compose files, don't modify security settings</li> </ul>"},{"location":"community/SECURITY/#security-roadmap","title":"Security Roadmap","text":""},{"location":"community/SECURITY/#v02-planned","title":"v0.2 (Planned)","text":"<ul> <li>Add bandit SAST scanning to CI/CD</li> <li>Implement dependency vulnerability scanning (Snyk or Dependabot)</li> <li>Add security policy enforcement in pre-commit hooks</li> </ul>"},{"location":"community/SECURITY/#v03-planned","title":"v0.3 (Planned)","text":"<ul> <li>Sandboxed code execution for AI-generated code review</li> <li>Static analysis of AI outputs before application</li> <li>Signature verification for AI history commits</li> </ul>"},{"location":"community/SECURITY/#future-enhancements","title":"Future Enhancements","text":"<ul> <li>Local LLM support (removes API dependency)</li> <li>End-to-end encryption for AI history</li> <li>Fine-grained access controls for multi-user deployments</li> <li>Audit logging with tamper-proof trail</li> </ul>"},{"location":"community/SECURITY/#security-contact","title":"Security Contact","text":"<p>For urgent security issues, contact:</p> <ul> <li>Email: security@weftlabs.com</li> <li>GPG Key: [TBD]</li> </ul> <p>For general security questions, open a discussion in GitHub Discussions.</p> <p>Last Updated: 2025-12-31 Security Policy Version: 1.0</p>"},{"location":"internal/documentation/","title":"Documentation Site Guide","text":"<p>This guide explains how to work with the Weft CLI documentation website powered by MkDocs Material.</p>"},{"location":"internal/documentation/#overview","title":"Overview","text":"<p>The documentation site is built using MkDocs with the Material theme. It automatically deploys to GitHub Pages when documentation changes are pushed to the <code>main</code> branch.</p> <p>Live Site: https://weftlabs.github.io/weft-cli/</p>"},{"location":"internal/documentation/#architecture","title":"Architecture","text":"<pre><code>weft-cli/\n\u251c\u2500\u2500 index.md              # Landing page (homepage)\n\u251c\u2500\u2500 mkdocs.yml            # Site configuration\n\u251c\u2500\u2500 docs/                 # Documentation source (markdown)\n\u2502   \u251c\u2500\u2500 stylesheets/\n\u2502   \u2502   \u2514\u2500\u2500 extra.css     # Custom CSS\n\u2502   \u251c\u2500\u2500 INSTALLATION.md\n\u2502   \u251c\u2500\u2500 CLI-REFERENCE.md\n\u2502   \u251c\u2500\u2500 AGENTS.md\n\u2502   \u2514\u2500\u2500 ...\n\u2514\u2500\u2500 .github/workflows/\n    \u2514\u2500\u2500 docs.yml          # Auto-deployment workflow\n</code></pre>"},{"location":"internal/documentation/#local-development","title":"Local Development","text":""},{"location":"internal/documentation/#install-dependencies","title":"Install Dependencies","text":"<pre><code># Install MkDocs and plugins\npip install -e \".[docs]\"\n\n# Or install directly\npip install mkdocs mkdocs-material mkdocs-minify-plugin pymdown-extensions\n</code></pre>"},{"location":"internal/documentation/#preview-locally","title":"Preview Locally","text":"<pre><code># Start development server with live reload\nmkdocs serve\n\n# Open browser to http://127.0.0.1:8000/\n</code></pre> <p>The development server will automatically reload when you edit markdown files.</p>"},{"location":"internal/documentation/#build-locally","title":"Build Locally","text":"<pre><code># Build the static site\nmkdocs build\n\n# Output will be in site/ directory\n# View with: python -m http.server 8000 --directory site\n</code></pre>"},{"location":"internal/documentation/#content-management","title":"Content Management","text":""},{"location":"internal/documentation/#adding-new-pages","title":"Adding New Pages","text":"<ol> <li>Create a markdown file in <code>docs/</code></li> <li>Add it to navigation in <code>mkdocs.yml</code>:</li> </ol> <pre><code>nav:\n  - User Guide:\n    - New Page: docs/NEW-PAGE.md\n</code></pre>"},{"location":"internal/documentation/#updating-existing-pages","title":"Updating Existing Pages","text":"<p>Simply edit the markdown files in <code>docs/</code>. Changes are automatically deployed on push to <code>main</code>.</p>"},{"location":"internal/documentation/#landing-page","title":"Landing Page","text":"<p>The homepage is defined in <code>index.md</code> at the repository root. It uses Material's features:</p> <ul> <li>Grid cards for feature highlights</li> <li>Tabbed code blocks for installation options</li> <li>Mermaid diagrams for workflows</li> <li>Custom buttons and styling</li> </ul>"},{"location":"internal/documentation/#markdown-features","title":"Markdown Features","text":"<p>MkDocs Material supports extended markdown syntax:</p>"},{"location":"internal/documentation/#admonitions","title":"Admonitions","text":"<pre><code>!!! note\n    This is a note admonition\n\n!!! warning\n    This is a warning\n\n!!! tip\n    This is a tip\n</code></pre>"},{"location":"internal/documentation/#code-blocks-with-tabs","title":"Code Blocks with Tabs","text":"<pre><code>=== \"Python\"\n    ```python\n    print(\"Hello\")\n    ```\n\n=== \"JavaScript\"\n    ```javascript\n    console.log(\"Hello\");\n    ```\n</code></pre>"},{"location":"internal/documentation/#mermaid-diagrams","title":"Mermaid Diagrams","text":"<p><pre><code>```mermaid\ngraph LR\n    A[Start] --&gt; B[Process]\n    B --&gt; C[End]\n</code></pre> <pre><code>### Tables\n\n```markdown\n| Feature | Status |\n|---------|--------|\n| CLI     | \u2705     |\n| API     | \u26a0\ufe0f     |\n</code></pre></p>"},{"location":"internal/documentation/#icons","title":"Icons","text":"<pre><code>:material-check-circle:{ .lg .middle } **Feature Name**\n:octicons-info-16: Information icon\n</code></pre> <p>Full icon list: https://squidfunk.github.io/mkdocs-material/reference/icons-emojis/</p>"},{"location":"internal/documentation/#configuration","title":"Configuration","text":""},{"location":"internal/documentation/#site-settings","title":"Site Settings","text":"<p>Edit <code>mkdocs.yml</code> to configure:</p> <ul> <li>site_name: Site title</li> <li>site_url: Production URL</li> <li>repo_url: GitHub repository</li> <li>theme: Color scheme, features, fonts</li> <li>nav: Site navigation structure</li> </ul>"},{"location":"internal/documentation/#theme-customization","title":"Theme Customization","text":"<p>Edit <code>docs/stylesheets/extra.css</code> for custom styling:</p> <pre><code>:root {\n  --md-primary-fg-color: #3f51b5;\n}\n</code></pre>"},{"location":"internal/documentation/#plugins","title":"Plugins","text":"<p>Configured in <code>mkdocs.yml</code>:</p> <ul> <li>search: Full-text search with suggestions</li> <li>minify: Optimize HTML for production</li> </ul>"},{"location":"internal/documentation/#deployment","title":"Deployment","text":""},{"location":"internal/documentation/#automatic-deployment","title":"Automatic Deployment","text":"<p>The <code>.github/workflows/docs.yml</code> workflow automatically:</p> <ol> <li>Triggers on push to <code>main</code> when docs change</li> <li>Installs MkDocs dependencies</li> <li>Builds the site</li> <li>Deploys to GitHub Pages (<code>gh-pages</code> branch)</li> </ol> <p>Deployment URL: https://weftlabs.github.io/weft-cli/</p>"},{"location":"internal/documentation/#manual-deployment","title":"Manual Deployment","text":"<pre><code># Deploy to GitHub Pages manually\nmkdocs gh-deploy\n\n# Force rebuild and deploy\nmkdocs gh-deploy --force --clean\n</code></pre>"},{"location":"internal/documentation/#github-pages-setup","title":"GitHub Pages Setup","text":""},{"location":"internal/documentation/#initial-configuration","title":"Initial Configuration","text":"<ol> <li> <p>Enable GitHub Pages:</p> <ul> <li>Go to repository Settings \u2192 Pages</li> <li>Source: Deploy from a branch</li> <li>Branch: <code>gh-pages</code> (created automatically by <code>mkdocs gh-deploy</code>)</li> <li>Folder: <code>/ (root)</code></li> </ul> </li> <li> <p>Custom Domain (Optional):</p> <ul> <li>Add CNAME record: <code>docs.weftlabs.dev</code> \u2192 <code>weftlabs.github.io</code></li> <li>In Settings \u2192 Pages, add custom domain</li> <li>Enable \"Enforce HTTPS\"</li> </ul> </li> <li> <p>Verify Deployment:</p> <ul> <li>Push changes to <code>main</code></li> <li>Check Actions tab for workflow run</li> <li>Visit site at https://weftlabs.github.io/weft-cli/</li> </ul> </li> </ol>"},{"location":"internal/documentation/#troubleshooting-deployment","title":"Troubleshooting Deployment","text":"<p>Site not updating:</p> <ul> <li>Check Actions tab for workflow errors</li> <li>Verify <code>gh-pages</code> branch exists</li> <li>Check GitHub Pages settings</li> <li>Clear browser cache</li> </ul> <p>404 errors:</p> <ul> <li>Ensure <code>site_url</code> in <code>mkdocs.yml</code> matches GitHub Pages URL</li> <li>Check navigation paths in <code>mkdocs.yml</code></li> <li>Verify file exists in <code>docs/</code></li> </ul> <p>Broken links: <pre><code># Check for broken links\nmkdocs build --strict\n</code></pre></p>"},{"location":"internal/documentation/#best-practices","title":"Best Practices","text":""},{"location":"internal/documentation/#documentation-style","title":"Documentation Style","text":"<ul> <li>Use clear, concise language</li> <li>Include code examples</li> <li>Add visual aids (diagrams, screenshots)</li> <li>Keep pages focused (one topic per page)</li> <li>Use admonitions for important notes</li> </ul>"},{"location":"internal/documentation/#file-organization","title":"File Organization","text":"<pre><code>docs/\n\u251c\u2500\u2500 INSTALLATION.md      # Getting started\n\u251c\u2500\u2500 CLI-REFERENCE.md     # User guides\n\u251c\u2500\u2500 ARCHITECTURE.md      # Technical docs\n\u2514\u2500\u2500 DEVELOPMENT.md       # Contributor guides\n</code></pre>"},{"location":"internal/documentation/#navigation-structure","title":"Navigation Structure","text":"<p>Organize navigation logically in <code>mkdocs.yml</code>:</p> <ol> <li>Getting Started (installation, quick start)</li> <li>User Guide (features, usage)</li> <li>Development (contributing, architecture)</li> <li>Community (changelog, license)</li> </ol>"},{"location":"internal/documentation/#seo-optimization","title":"SEO Optimization","text":"<p>Add front matter to pages:</p> <pre><code>---\ntitle: Installation Guide\ndescription: Install Weft CLI using Homebrew, pipx, or curl\n---\n</code></pre>"},{"location":"internal/documentation/#advanced-features","title":"Advanced Features","text":""},{"location":"internal/documentation/#search","title":"Search","text":"<p>Automatic full-text search is enabled. Configure in <code>mkdocs.yml</code>:</p> <pre><code>plugins:\n  - search:\n      separator: '[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&amp;[lg]t;|(?!\\b)(?=[A-Z][a-z])'\n</code></pre>"},{"location":"internal/documentation/#versioning","title":"Versioning","text":"<p>For multiple versions (future):</p> <pre><code># Install mike for versioning\npip install mike\n\n# Deploy version\nmike deploy 1.0 latest\nmike set-default latest\n</code></pre>"},{"location":"internal/documentation/#analytics","title":"Analytics","text":"<p>Add Google Analytics in <code>mkdocs.yml</code>:</p> <pre><code>extra:\n  analytics:\n    provider: google\n    property: G-XXXXXXXXXX\n</code></pre>"},{"location":"internal/documentation/#maintenance","title":"Maintenance","text":""},{"location":"internal/documentation/#regular-tasks","title":"Regular Tasks","text":"<ul> <li>Review and update documentation with each release</li> <li>Check for broken links: <code>mkdocs build --strict</code></li> <li>Update screenshots and examples</li> <li>Keep installation instructions current</li> </ul>"},{"location":"internal/documentation/#monitoring","title":"Monitoring","text":"<ul> <li>Check GitHub Actions for deployment failures</li> <li>Monitor GitHub Pages analytics</li> <li>Review search queries for missing content</li> <li>Check 404 pages for broken links</li> </ul>"},{"location":"internal/documentation/#resources","title":"Resources","text":"<ul> <li>MkDocs Documentation</li> <li>Material for MkDocs</li> <li>Markdown Guide</li> <li>GitHub Pages Docs</li> </ul>"},{"location":"internal/documentation/#getting-help","title":"Getting Help","text":"<p>If you encounter issues:</p> <ol> <li>Check the MkDocs documentation</li> <li>Review Material theme docs</li> <li>Look for errors in <code>mkdocs serve</code> output</li> <li>Check GitHub Actions logs</li> <li>Open an issue in the repository</li> </ol>"},{"location":"internal/documentation/#contributing","title":"Contributing","text":"<p>When contributing documentation:</p> <ol> <li>Fork the repository</li> <li>Create a branch: <code>git checkout -b docs/feature-name</code></li> <li>Edit markdown files in <code>docs/</code></li> <li>Test locally: <code>mkdocs serve</code></li> <li>Commit and push</li> <li>Open a pull request</li> </ol> <p>Documentation changes should: - Follow existing style and structure - Include code examples where relevant - Be grammatically correct and clear - Update navigation in <code>mkdocs.yml</code> if adding pages</p>"},{"location":"internal/release-process/","title":"Release Process","text":"<p>This document describes the release process for Weft CLI.</p>"},{"location":"internal/release-process/#overview","title":"Overview","text":"<p>Weft uses semantic versioning (MAJOR.MINOR.PATCH) and automated workflows to distribute releases through multiple channels:</p> <ol> <li>GitHub Releases - Source code and release notes</li> <li>Homebrew - macOS/Linux package manager</li> <li>PyPI - Python Package Index (future)</li> <li>Install Script - Direct download via curl/wget</li> </ol>"},{"location":"internal/release-process/#release-checklist","title":"Release Checklist","text":""},{"location":"internal/release-process/#pre-release","title":"Pre-Release","text":"<ul> <li> All tests passing on main branch</li> <li> Documentation updated for new features</li> <li> CHANGELOG.md updated with release notes</li> <li> Version bumped in <code>pyproject.toml</code></li> <li> No known critical bugs</li> </ul>"},{"location":"internal/release-process/#release-steps","title":"Release Steps","text":"<ol> <li> <p>Update version in pyproject.toml: <pre><code># Edit pyproject.toml\nvim pyproject.toml\n# Change version = \"0.1.0\" to version = \"0.2.0\"\n</code></pre></p> </li> <li> <p>Update CHANGELOG.md: <pre><code>## [0.2.0] - 2024-XX-XX\n\n### Added\n- New feature X\n- New feature Y\n\n### Fixed\n- Bug fix A\n- Bug fix B\n\n### Changed\n- Breaking change C\n</code></pre></p> </li> <li> <p>Commit and tag: <pre><code>git add pyproject.toml CHANGELOG.md\ngit commit -m \"chore(release): bump version to v0.2.0\"\ngit push origin main\n\ngit tag -a v0.2.0 -m \"Release v0.2.0\"\ngit push origin v0.2.0\n</code></pre></p> </li> <li> <p>Create GitHub Release:</p> <ul> <li>Go to https://github.com/weftlabs/weft-cli/releases/new</li> <li>Select tag: v0.2.0</li> <li>Title: \"Weft CLI v0.2.0\"</li> <li>Copy relevant CHANGELOG.md section</li> <li>Publish release</li> </ul> </li> <li> <p>Automated Actions Run:</p> <ul> <li>GitHub Actions automatically update Homebrew formula</li> <li>Install script pulls latest version</li> </ul> </li> </ol>"},{"location":"internal/release-process/#post-release","title":"Post-Release","text":"<ul> <li> Verify Homebrew installation: <code>brew upgrade weft &amp;&amp; weft --version</code></li> <li> Verify install script: <code>curl ... | sh</code> in fresh environment</li> <li> Announce release in GitHub Discussions</li> <li> Update documentation website (if applicable)</li> </ul>"},{"location":"internal/release-process/#semantic-versioning","title":"Semantic Versioning","text":""},{"location":"internal/release-process/#major-version-x00","title":"MAJOR version (X.0.0)","text":"<p>Breaking changes that require user action:</p> <ul> <li>Incompatible API/CLI changes</li> <li>Removal of deprecated features</li> <li>Major architectural changes</li> </ul> <p>Example: <code>1.0.0</code> \u2192 <code>2.0.0</code></p>"},{"location":"internal/release-process/#minor-version-0x0","title":"MINOR version (0.X.0)","text":"<p>New features, backward-compatible:</p> <ul> <li>New CLI commands</li> <li>New agent capabilities</li> <li>New configuration options</li> </ul> <p>Example: <code>0.2.0</code> \u2192 <code>0.3.0</code></p>"},{"location":"internal/release-process/#patch-version-00x","title":"PATCH version (0.0.X)","text":"<p>Bug fixes, backward-compatible:</p> <ul> <li>Security patches</li> <li>Bug fixes</li> <li>Documentation updates</li> </ul> <p>Example: <code>0.2.1</code> \u2192 <code>0.2.2</code></p>"},{"location":"internal/release-process/#automated-release-workflow","title":"Automated Release Workflow","text":"<p>The release process is automated via GitHub Actions:</p>"},{"location":"internal/release-process/#1-homebrew-formula-update","title":"1. Homebrew Formula Update","text":"<p><code>.github/workflows/update-homebrew.yml</code> automatically:</p> <ul> <li>Triggers on new GitHub release</li> <li>Calculates tarball SHA256</li> <li>Updates formula in <code>weftlabs/homebrew-tap</code></li> <li>Commits and pushes changes</li> </ul>"},{"location":"internal/release-process/#2-release-assets","title":"2. Release Assets","text":"<p><code>.github/workflows/release.yml</code> creates:</p> <ul> <li>Source code tarball</li> <li>SHA256 checksums</li> <li>Release notes from CHANGELOG</li> </ul>"},{"location":"internal/release-process/#manual-homebrew-update","title":"Manual Homebrew Update","text":"<p>If automated workflow fails:</p> <pre><code># 1. Clone the tap repository\ngit clone https://github.com/weftlabs/homebrew-tap.git\ncd homebrew-tap\n\n# 2. Download and hash the release tarball\nVERSION=0.2.0\ncurl -L \"https://github.com/weftlabs/weft-cli/archive/refs/tags/v${VERSION}.tar.gz\" | shasum -a 256\n\n# 3. Update Formula/weft.rb\nvim Formula/weft.rb\n# Update the 'url' and 'sha256' fields\n\n# 4. Test the formula\nbrew install --build-from-source ./Formula/weft.rb\nbrew test weft\nbrew audit --strict weft\n\n# 5. Commit and push\ngit add Formula/weft.rb\ngit commit -m \"Update Weft to v${VERSION}\"\ngit push origin main\n</code></pre>"},{"location":"internal/release-process/#pypi-release-future","title":"PyPI Release (Future)","text":"<p>Once published to PyPI:</p> <pre><code># Build distribution\npython -m build\n\n# Upload to PyPI (requires credentials)\npython -m twine upload dist/*\n</code></pre> <p>Then users can install with: <pre><code>pip install weft\npipx install weft\n</code></pre></p>"},{"location":"internal/release-process/#rollback-procedure","title":"Rollback Procedure","text":"<p>If a release has critical bugs:</p>"},{"location":"internal/release-process/#1-revert-homebrew-formula","title":"1. Revert Homebrew Formula","text":"<pre><code>cd homebrew-tap\ngit revert HEAD\ngit push origin main\n</code></pre>"},{"location":"internal/release-process/#2-delete-github-release","title":"2. Delete GitHub Release","text":"<ul> <li>Go to Releases page</li> <li>Delete the problematic release</li> <li>Delete the git tag:   <pre><code>git tag -d v0.2.0\ngit push origin :refs/tags/v0.2.0\n</code></pre></li> </ul>"},{"location":"internal/release-process/#3-fix-and-re-release","title":"3. Fix and Re-release","text":"<ul> <li>Fix the critical bug</li> <li>Follow normal release process with PATCH version bump</li> </ul>"},{"location":"internal/release-process/#release-cadence","title":"Release Cadence","text":"<p>Current (v0.x - Early Development):</p> <ul> <li>Releases as features complete</li> <li>No fixed schedule</li> <li>Frequent patch releases for bugs</li> </ul> <p>Planned (v1.0+):</p> <ul> <li>Minor releases: Every 4-6 weeks</li> <li>Patch releases: As needed for critical bugs</li> <li>Major releases: Once or twice per year</li> </ul>"},{"location":"internal/release-process/#version-support","title":"Version Support","text":"<p>Current version (latest): Full support, active development</p> <p>Previous minor version (n-1): Critical security fixes only</p> <p>Older versions: No support, users encouraged to upgrade</p>"},{"location":"internal/release-process/#testing-releases","title":"Testing Releases","text":""},{"location":"internal/release-process/#pre-release-testing","title":"Pre-release Testing","text":"<p>Before tagging:</p> <pre><code># Run full test suite\npytest\n\n# Test installation from source\npip install -e .\nweft --version\n\n# Test Docker runtime\ncd /tmp &amp;&amp; mkdir test-weft &amp;&amp; cd test-weft\nweft init\nweft up\nweft status\nweft down\n</code></pre>"},{"location":"internal/release-process/#post-release-testing","title":"Post-release Testing","text":"<p>After release:</p> <pre><code># Test Homebrew installation (clean environment)\ndocker run --rm -it homebrew/brew bash\nbrew tap weftlabs/tap\nbrew install weft\nweft --version\n\n# Test install script (clean environment)\ndocker run --rm -it python:3.11-slim bash\napt-get update &amp;&amp; apt-get install -y curl\ncurl -fsSL https://raw.githubusercontent.com/weftlabs/weft-cli/main/install.sh | sh\nweft --version\n</code></pre>"},{"location":"internal/release-process/#communication","title":"Communication","text":""},{"location":"internal/release-process/#release-announcements","title":"Release Announcements","text":"<p>Post to:</p> <ul> <li>GitHub Releases (automatic)</li> <li>GitHub Discussions</li> <li>Project documentation</li> <li>Social media (if applicable)</li> </ul>"},{"location":"internal/release-process/#template","title":"Template","text":"<pre><code>## Weft CLI v0.2.0 Released\n\nWe're excited to announce Weft v0.2.0!\n\n### What's New\n\n- Feature X: Description\n- Feature Y: Description\n\n### Bug Fixes\n\n- Fixed issue A\n- Fixed issue B\n\n### Upgrade Instructions\n```bash\n# Homebrew\nbrew upgrade weft\n\n# pipx\npipx upgrade weft\n</code></pre> <p>See the full CHANGELOG for details. <pre><code>## Troubleshooting Releases\n\n### \"Formula doesn't match checksum\"\n\nHomebrew cache issue. Clear and retry:\n```bash\nbrew cleanup weft\nbrew uninstall weft\nbrew install weft\n</code></pre></p>"},{"location":"internal/release-process/#version-not-found-in-github-api","title":"\"Version not found in GitHub API\"","text":"<p>GitHub releases need a few minutes to propagate. Wait and retry.</p>"},{"location":"internal/release-process/#install-script-fails","title":"\"Install script fails\"","text":"<ol> <li>Check GitHub release exists</li> <li>Verify tarball is downloadable</li> <li>Test install script locally</li> <li>Check Python/pip availability</li> </ol>"},{"location":"internal/release-process/#security-releases","title":"Security Releases","text":"<p>For security vulnerabilities:</p> <ol> <li>Do not publicly disclose until patch is ready</li> <li>Follow SECURITY.md disclosure process</li> <li>Create patch release immediately</li> <li>Tag as security release in GitHub</li> <li>Notify users via security advisory</li> <li>Credit reporter in CHANGELOG (with permission)</li> </ol>"},{"location":"internal/release-process/#resources","title":"Resources","text":"<ul> <li>Semantic Versioning</li> <li>Keep a Changelog</li> <li>Homebrew Formula Cookbook</li> <li>GitHub Releases Guide</li> </ul>"},{"location":"internal/testing-install/","title":"Testing Installation Methods","text":"<p>This document describes how to test the various installation methods for Weft CLI.</p>"},{"location":"internal/testing-install/#local-testing","title":"Local Testing","text":""},{"location":"internal/testing-install/#test-the-install-script","title":"Test the Install Script","text":"<pre><code># Test local installation (development mode)\nWEFT_LOCAL_INSTALL=1 bash install.sh\n\n# Verify installation\nweft --version\n# Or if not in PATH:\n$HOME/.local/bin/weft --version\n# Or on macOS:\n$HOME/Library/Python/3.12/bin/weft --version\n\n# Clean up\npython3 -m pip uninstall -y weft\n# On macOS Homebrew Python:\npython3 -m pip uninstall -y --break-system-packages weft\n</code></pre>"},{"location":"internal/testing-install/#test-pipx-installation","title":"Test pipx Installation","text":"<pre><code># Install pipx if needed\npython3 -m pip install --user pipx\npython3 -m pipx ensurepath\n\n# Install from local directory\npipx install .\n\n# Verify\nweft --version\n\n# Clean up\npipx uninstall weft\n</code></pre>"},{"location":"internal/testing-install/#test-from-source","title":"Test from Source","text":"<pre><code># Install in development mode\npip install -e .\n\n# Verify\nweft --version\n\n# Clean up\npip uninstall weft\n</code></pre>"},{"location":"internal/testing-install/#cicd-testing","title":"CI/CD Testing","text":"<p>The <code>.github/workflows/test-install.yml</code> workflow automatically tests:</p>"},{"location":"internal/testing-install/#test-matrix","title":"Test Matrix","text":"<p>Platforms:</p> <ul> <li>Ubuntu Latest</li> <li>macOS Latest</li> </ul> <p>Python Versions:</p> <ul> <li>3.11</li> <li>3.12</li> </ul> <p>Installation Methods:</p> <ul> <li>Install script (local mode)</li> <li>pipx</li> </ul>"},{"location":"internal/testing-install/#what-gets-tested","title":"What Gets Tested","text":"<ol> <li> <p>Install Script Tests (<code>test-install-script</code> job)</p> <ul> <li>Python version detection</li> <li>Docker availability check (Ubuntu only - macOS CI doesn't support Docker)</li> <li>PEP 668 handling (externally-managed environments)</li> <li>Installation success</li> <li>Binary availability and execution</li> <li>Version command</li> <li>Help command</li> </ul> </li> <li> <p>Installation Methods (<code>test-install-methods</code> job)</p> <ul> <li>Local install script</li> <li>pipx installation</li> <li>Cross-platform compatibility</li> </ul> </li> <li> <p>Shellcheck (<code>shellcheck</code> job)</p> <ul> <li>Bash syntax validation</li> <li>Shell scripting best practices</li> <li>Security issues detection</li> </ul> </li> <li> <p>GitHub Installation (<code>test-from-github</code> job)</p> <ul> <li>Only runs on release events</li> <li>Tests actual GitHub download</li> <li>Verifies end-to-end installation</li> </ul> </li> </ol>"},{"location":"internal/testing-install/#running-ci-tests-locally","title":"Running CI Tests Locally","text":""},{"location":"internal/testing-install/#using-act-github-actions-locally","title":"Using act (GitHub Actions locally)","text":"<pre><code># Install act\nbrew install act\n\n# Run all install tests\nact -j test-install-script\n\n# Run specific job\nact -j test-install-methods\n\n# Run shellcheck\nact -j shellcheck\n</code></pre>"},{"location":"internal/testing-install/#docker-testing","title":"Docker Testing","text":"<p>Test in clean environments:</p> <pre><code># Ubuntu 22.04 + Python 3.11\ndocker run --rm -it python:3.11-slim bash\napt-get update &amp;&amp; apt-get install -y curl git docker.io\ncurl -fsSL https://raw.githubusercontent.com/weftlabs/weft-cli/main/install.sh | sh\n\n# Alpine Linux\ndocker run --rm -it python:3.11-alpine sh\napk add --no-cache curl git docker\ncurl -fsSL https://raw.githubusercontent.com/weftlabs/weft-cli/main/install.sh | sh\n\n# Test with specific Python version\ndocker run --rm -it python:3.12-slim bash\napt-get update &amp;&amp; apt-get install -y curl git\ncurl -fsSL https://raw.githubusercontent.com/weftlabs/weft-cli/main/install.sh | sh\n</code></pre>"},{"location":"internal/testing-install/#manual-testing-checklist","title":"Manual Testing Checklist","text":"<p>Before releasing, manually test on:</p>"},{"location":"internal/testing-install/#macos","title":"macOS","text":"<ul> <li> Homebrew Python (externally-managed)</li> <li> System Python</li> <li> pyenv Python</li> <li> Docker Desktop installed</li> <li> Docker Desktop not installed (should warn)</li> </ul>"},{"location":"internal/testing-install/#linux-ubuntudebian","title":"Linux (Ubuntu/Debian)","text":"<ul> <li> System Python</li> <li> Python from deadsnakes PPA</li> <li> Docker installed</li> <li> Docker not installed (should warn)</li> </ul>"},{"location":"internal/testing-install/#linux-fedorarhel","title":"Linux (Fedora/RHEL)","text":"<ul> <li> System Python</li> <li> Docker/Podman installed</li> </ul>"},{"location":"internal/testing-install/#installation-methods","title":"Installation Methods","text":"<ul> <li> Install script via curl</li> <li> Install script via wget</li> <li> pipx install</li> <li> pip install from source</li> <li> Homebrew (after release)</li> </ul>"},{"location":"internal/testing-install/#verification-steps","title":"Verification Steps","text":"<p>For each method:</p> <ul> <li> <code>weft --version</code> works</li> <li> <code>weft --help</code> works</li> <li> <code>weft init</code> creates config</li> <li> No permission errors</li> <li> PATH warnings shown if needed</li> <li> Clean uninstall works</li> </ul>"},{"location":"internal/testing-install/#troubleshooting-tests","title":"Troubleshooting Tests","text":""},{"location":"internal/testing-install/#install-script-fails","title":"Install Script Fails","text":"<pre><code># Enable debug mode\nset -x\nWEFT_LOCAL_INSTALL=1 bash install.sh\n\n# Check install log\ncat /tmp/weft-install.log\n</code></pre>"},{"location":"internal/testing-install/#binary-not-found-after-install","title":"Binary Not Found After Install","text":"<pre><code># Find where it was installed\nfind ~ -name weft -type f 2&gt;/dev/null\n\n# Check pip install location\npython3 -m pip show weft\n\n# Check PATH\necho $PATH\n</code></pre>"},{"location":"internal/testing-install/#permission-errors","title":"Permission Errors","text":"<pre><code># Ensure using --user flag\npython3 -m pip install --user .\n\n# On macOS Homebrew Python\npython3 -m pip install --user --break-system-packages .\n</code></pre>"},{"location":"internal/testing-install/#docker-check-fails","title":"Docker Check Fails","text":"<pre><code># Test Docker availability\ndocker --version\ndocker ps\n\n# Start Docker\n# macOS: Start Docker Desktop\n# Linux: sudo systemctl start docker\n</code></pre>"},{"location":"internal/testing-install/#cicd-triggers","title":"CI/CD Triggers","text":"<p>The test workflow runs on:</p> <ol> <li>Push to main (when install.sh or pyproject.toml changes)</li> <li>Pull requests (when install.sh or pyproject.toml changes)</li> <li>Manual trigger (workflow_dispatch)</li> <li>Release events (for GitHub installation test)</li> </ol>"},{"location":"internal/testing-install/#test-coverage","title":"Test Coverage","text":"<p>The CI/CD tests cover:</p> <ul> <li>\u2705 Python 3.11 and 3.12</li> <li>\u2705 Ubuntu and macOS</li> <li>\u2705 PEP 668 compliance</li> <li>\u2705 Prerequisite checking</li> <li>\u2705 Binary verification</li> <li>\u2705 Basic command execution</li> <li>\u2705 Shell script linting</li> <li>\u2705 pipx installation</li> <li>\u2705 Local install mode</li> </ul> <p>Note: Docker is only verified on Ubuntu in CI. macOS GitHub Actions runners don't support Docker/colima reliably. The install script correctly warns about missing Docker on macOS in CI, which is expected behavior.</p> <p>Not covered (requires manual testing):</p> <ul> <li>\u26a0\ufe0f Windows/WSL (not officially supported yet)</li> <li>\u26a0\ufe0f Homebrew installation (requires published tap)</li> <li>\u26a0\ufe0f Network issues and retries</li> <li>\u26a0\ufe0f Proxy environments</li> <li>\u26a0\ufe0f Air-gapped installations</li> <li>\u26a0\ufe0f Various Linux distributions</li> </ul>"},{"location":"internal/testing-install/#performance-testing","title":"Performance Testing","text":""},{"location":"internal/testing-install/#installation-speed","title":"Installation Speed","text":"<p>Time each method:</p> <pre><code>time WEFT_LOCAL_INSTALL=1 bash install.sh\ntime pipx install .\ntime pip install -e .\n</code></pre> <p>Expected times: - Install script: ~10-20 seconds - pipx: ~15-30 seconds - pip editable: ~5-10 seconds</p>"},{"location":"internal/testing-install/#resource-usage","title":"Resource Usage","text":"<p>Monitor during installation:</p> <pre><code># Memory usage\nwhile true; do ps aux | grep -E '(pip|python)' | grep -v grep; sleep 1; done\n\n# Disk usage\ndu -sh ~/.local/lib/python*/site-packages/weft\n</code></pre>"},{"location":"internal/testing-install/#regression-testing","title":"Regression Testing","text":"<p>After changes to install.sh:</p> <ol> <li>Run full CI/CD suite</li> <li>Test on at least 2 platforms manually</li> <li>Verify error messages are helpful</li> <li>Check PATH detection works</li> <li>Ensure cleanup is complete on failure</li> </ol>"},{"location":"internal/testing-install/#release-testing","title":"Release Testing","text":"<p>Before tagging a release:</p> <pre><code># 1. Test local install\nWEFT_LOCAL_INSTALL=1 bash install.sh\nweft --version\n\n# 2. Test pipx\npipx install .\nweft --version\n\n# 3. Clean up\npipx uninstall weft || python3 -m pip uninstall -y weft\n\n# 4. Run CI tests\ngit push origin main\n# Watch GitHub Actions\n\n# 5. After release, test GitHub install\ncurl -fsSL https://raw.githubusercontent.com/weftlabs/weft-cli/main/install.sh | sh\n</code></pre>"},{"location":"internal/testing-install/#continuous-improvement","title":"Continuous Improvement","text":"<p>Track installation issues:</p> <ol> <li>Monitor GitHub issues for install problems</li> <li>Review CI/CD failure patterns</li> <li>Add new test cases for discovered bugs</li> <li>Update error messages based on user feedback</li> <li>Expand platform support based on demand</li> </ol>"},{"location":"internal/testing-install/#resources","title":"Resources","text":"<ul> <li>PEP 668 - Marking Python base environments as \"externally managed\"</li> <li>GitHub Actions Documentation</li> <li>pipx Documentation</li> <li>ShellCheck</li> </ul>"}]}